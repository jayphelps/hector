/**
 * Hector
 * (c) 2012 Jay Phelps
 * MIT Licensed
 * https://github.com/jayphelps/hector
 */var Hector=function(a,b){function f(a,b,c){a.call(c,b)}"use strict";var c={},d=c.options={log:!0,debug:!0,buffer:!0,namespace:"window",target:"javascript/hector"},e=c.log=function(b,c){d.log&&a.console&&(c=c||"Log",console.log("Hector"+c+":",b))};return c.parseTreeNode=function(a,b){if(!a||!a.type)return a;var d=c.Builders[a.type];if(!d)throw Error("No builder for type: "+a.type);var e=d(a,b)+"";return e},c.walkTree=function(a,b){var d=[];for(var e=0,f=a.length;e<f;e++)d.push(c.parseTreeNode(a[e],b));return d},c.render=function(a,b,e){if(!e)throw Error("Hector.render() a context is required.");if(d.debug){var g=a+"",h=g.slice(0,g.indexOf(";\n")).replace(/\"/g,"");try{f(a,b,e)}catch(i){throw c.ExceptionWrapper(i,"rendering template "+h)}}else f(a,b,e)},c.compile=function(a){if(!a)return"";var b=c.Parser.parse(a);e(b,"ParseTree");var d=c.walkTree(b.nodes,"this").join("");return e(d,"TemplateOutput"),d},c.eval=function(a){var d=c.compile(a),e=b.createElement("script");e.appendChild(b.createTextNode(d)),(b.body||b.head||b.documentElement).appendChild(e)},c}(window,document);Hector.Parser=function(){function b(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function c(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var a;return a={parse:function(a){function m(a,b,c){var d=a,e=c-a.length;for(var f=0;f<e;f++)d=b+d;return d}function n(a){var b=a.charCodeAt(0),c,d;return b>255?(c="u",d=4):(c="x",d=2),"\\"+c+m(b.toString(16).toUpperCase(),"0",d)}function o(){function b(){var b;for(;h<g;h++)b=a.charAt(h),b==="\n"?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):b==="\r"||b==="\u2028"||b==="\u2029"?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1)}return h!==g&&(h>g&&(h=0,i={line:1,column:1,seenCR:!1}),b()),i}function p(){return g}function q(){return o().line}function r(){return o().column}function s(a){if(f<k)return;f>k&&(k=f,l=[]),l.push(a)}function t(){var a,b,c,d,e,h;return b=f,c=f,d=D(),d!==null?(e=bg(),e!==null?(h=D(),h!==null?a=[d,e,h]:(a=null,f=c)):(a=null,f=c)):(a=null,f=c),a!==null&&(g=b,a=function(a){return a}(e)),a===null&&(f=b),a}function u(){var b;return a.length>f?(b=a.charAt(f),f++):(b=null,j===0&&s("any character")),b}function v(){var b;return j++,/^[\n\r]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[\\n\\r]")),j--,j===0&&b===null&&s("end of line"),b}function w(){var b,c;return c=f,j++,a.length>f?(b=a.charAt(f),f++):(b=null,j===0&&s("any character")),j--,b===null?b="":(b=null,f=c),b}function x(){var b;return j++,/^[ \t\x0B\f]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[ \\t\\x0B\\f]")),j--,j===0&&b===null&&s("whitespace"),b}function y(){var a;return j++,a=z(),a===null&&(a=B()),j--,j===0&&a===null&&s("comment"),a}function z(){var b,c,d,e,g,h,i,k;c=f,a.substr(f,2)==="/*"?(d="/*",f+=2):(d=null,j===0&&s('"/*"'));if(d!==null){e=[],h=f,k=f,j++,a.substr(f,2)==="*/"?(i="*/",f+=2):(i=null,j===0&&s('"*/"')),j--,i===null?i="":(i=null,f=k),i!==null?(k=u(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);while(g!==null)e.push(g),h=f,k=f,j++,a.substr(f,2)==="*/"?(i="*/",f+=2):(i=null,j===0&&s('"*/"')),j--,i===null?i="":(i=null,f=k),i!==null?(k=u(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);e!==null?(a.substr(f,2)==="*/"?(g="*/",f+=2):(g=null,j===0&&s('"*/"')),g!==null?b=[d,e,g]:(b=null,f=c)):(b=null,f=c)}else b=null,f=c;return b}function A(){var b,c,d,e,g,h,i,k;c=f,a.substr(f,2)==="/*"?(d="/*",f+=2):(d=null,j===0&&s('"/*"'));if(d!==null){e=[],h=f,k=f,j++,a.substr(f,2)==="*/"?(i="*/",f+=2):(i=null,j===0&&s('"*/"')),i===null&&(i=v()),j--,i===null?i="":(i=null,f=k),i!==null?(k=u(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);while(g!==null)e.push(g),h=f,k=f,j++,a.substr(f,2)==="*/"?(i="*/",f+=2):(i=null,j===0&&s('"*/"')),i===null&&(i=v()),j--,i===null?i="":(i=null,f=k),i!==null?(k=u(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);e!==null?(a.substr(f,2)==="*/"?(g="*/",f+=2):(g=null,j===0&&s('"*/"')),g!==null?b=[d,e,g]:(b=null,f=c)):(b=null,f=c)}else b=null,f=c;return b}function B(){var b,c,d,e,g,h,i,k;c=f,a.substr(f,2)==="//"?(d="//",f+=2):(d=null,j===0&&s('"//"'));if(d!==null){e=[],h=f,k=f,j++,i=v(),j--,i===null?i="":(i=null,f=k),i!==null?(k=u(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);while(g!==null)e.push(g),h=f,k=f,j++,i=v(),j--,i===null?i="":(i=null,f=k),i!==null?(k=u(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);e!==null?b=[d,e]:(b=null,f=c)}else b=null,f=c;return b}function C(){var a,b;a=[],b=x(),b===null&&(b=A(),b===null&&(b=B()));while(b!==null)a.push(b),b=x(),b===null&&(b=A(),b===null&&(b=B()));return a}function D(){var a,b;a=[],b=x(),b===null&&(b=v(),b===null&&(b=y()));while(b!==null)a.push(b),b=x(),b===null&&(b=v(),b===null&&(b=y()));return a}function E(){var a,b,c;b=f,c=G();if(c!==null){a=[];while(c!==null)a.push(c),c=G()}else a=null;return a!==null&&(g=b,a=function(a){return a.join("")}(a)),a===null&&(f=b),a}function F(){var a,b,c;b=f,c=H();if(c!==null){a=[];while(c!==null)a.push(c),c=H()}else a=null;return a!==null&&(g=b,a=function(a){return a.join("")}(a)),a===null&&(f=b),a}function G(){var b,c,d,e,h;return c=f,d=f,h=f,j++,a.charCodeAt(f)===34?(e='"',f++):(e=null,j===0&&s('"\\""')),e===null&&(a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e===null&&(e=v())),j--,e===null?e="":(e=null,f=h),e!==null?(h=u(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b===null&&(c=f,d=f,a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e!==null?(h=J(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b===null&&(b=I())),b}function H(){var b,c,d,e,h;return c=f,d=f,h=f,j++,a.charCodeAt(f)===39?(e="'",f++):(e=null,j===0&&s('"\'"')),e===null&&(a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e===null&&(e=v())),j--,e===null?e="":(e=null,f=h),e!==null?(h=u(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b===null&&(c=f,d=f,a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e!==null?(h=J(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b===null&&(b=I())),b}function I(){var b,c,d,e,h;return c=f,d=f,a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e!==null?(h=v(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b}function J(){var a;return a=K(),a===null&&(a=L()),a}function K(){var b,c;return c=f,/^['"\\bfnrtv]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("['\"\\\\bfnrtv]")),b!==null&&(g=c,b=function(a){return a.replace("b","\b").replace("f","\f").replace("n","\n").replace("r","\r").replace("t","\t").replace("v","")}(b)),b===null&&(f=c),b}function L(){var a,b,c,d,e;return b=f,c=f,e=f,j++,d=M(),j--,d===null?d="":(d=null,f=e),d===null&&(d=v()),d!==null?(e=u(),e!==null?a=[d,e]:(a=null,f=c)):(a=null,f=c),a!==null&&(g=b,a=function(a){return a}(e)),a===null&&(f=b),a}function M(){var b;return b=K(),b===null&&(b=O(),b===null&&(a.charCodeAt(f)===120?(b="x",f++):(b=null,j===0&&s('"x"')),b===null&&(a.charCodeAt(f)===117?(b="u",f++):(b=null,j===0&&s('"u"'))))),b}function N(){var a,b,c;b=f,c=O();if(c!==null){a=[];while(c!==null)a.push(c),c=O()}else a=null;return a!==null&&(g=b,a=function(a){return a.join("")}(a)),a===null&&(f=b),a}function O(){var b;return/^[0-9]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[0-9]")),b}function P(){var a,b,c,d,e,h;j++,b=f,c=f,d=Q();if(d!==null){e=[],h=R();while(h!==null)e.push(h),h=R();e!==null?a=[d,e]:(a=null,f=c)}else a=null,f=c;return a!==null&&(g=b,a=function(a,b){var c=a+b.join("");return Hector.symbols.add(c),c}(d,e)),a===null&&(f=b),j--,j===0&&a===null&&s("identifier"),a}function Q(){var b;return/^[a-zA-Z_]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[a-zA-Z_]")),b}function R(){var b;return b=Q(),b===null&&(/^[0-9]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[0-9]"))),b}function S(){var b,c,d,e,g;return c=f,a.substr(f,3)==="def"?(d="def",f+=3):(d=null,j===0&&s('"def"')),d!==null?(g=f,j++,e=R(),j--,e===null?e="":(e=null,f=g),e!==null?b=[d,e]:(b=null,f=c)):(b=null,f=c),b}function T(){var b,c,d,e,g;return c=f,a.charCodeAt(f)===63?(d="?",f++):(d=null,j===0&&s('"?"')),d!==null?(g=f,j++,e=R(),j--,e===null?e="":(e=null,f=g),e!==null?b=[d,e]:(b=null,f=c)):(b=null,f=c),b}function U(){var b,c,d,e,h,i;return j++,c=f,d=f,a.charCodeAt(f)===34?(e='"',f++):(e=null,j===0&&s('"\\""')),e!==null?(h=E(),h=h!==null?h:"",h!==null?(a.charCodeAt(f)===34?(i='"',f++):(i=null,j===0&&s('"\\""')),i!==null?b=[e,h,i]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b===null&&(d=f,a.charCodeAt(f)===39?(e="'",f++):(e=null,j===0&&s('"\'"')),e!==null?(h=F(),h=h!==null?h:"",h!==null?(a.charCodeAt(f)===39?(i="'",f++):(i=null,j===0&&s('"\'"')),i!==null?b=[e,h,i]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)),b!==null&&(g=c,b=function(a){return{type:"StringLiteral",attributes:[],value:'"'+a[1]+'"'}}(b)),b===null&&(f=c),j--,j===0&&b===null&&s("string"),b}function V(){var b,c,d,e,h,i,k,l,m;j++,c=f,d=f,a.charCodeAt(f)===36?(e="$",f++):(e=null,j===0&&s('"$"'));if(e!==null){h=Q();if(h!==null){i=[],k=R();while(k!==null)i.push(k),k=R();i!==null?(k=T(),k=k!==null?k:"",k!==null?(l=D(),l!==null?(m=Z(),m=m!==null?m:"",m!==null?b=[e,h,i,k,l,m]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)}else b=null,f=d}else b=null,f=d;return b!==null&&(g=c,b=function(a,b,c,d){var e=a+b.join("");return Hector.symbols.add(e),{type:"Variable",value:e,isConditional:!!c,attributes:d||[]}}(h,i,k,m)),b===null&&(f=c),j--,j===0&&b===null&&s("variable"),b}function W(){var b,c,d,e,h,i;return j++,c=f,d=f,e=V(),e!==null?(h=D(),h!==null?(a.charCodeAt(f)===59?(i=";",f++):(i=null,j===0&&s('";"')),i!==null?b=[e,h,i]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a.type="VariableStatement",a}(e)),b===null&&(f=c),j--,j===0&&b===null&&s("variable"),b}function X(){var b,c,d,e,h,i,k,l,m;j++,c=f,d=f,e=P();if(e!==null){h=[],k=f,a.charCodeAt(f)===46?(l=".",f++):(l=null,j===0&&s('"."')),l!==null?(m=P(),m!==null?i=[l,m]:(i=null,f=k)):(i=null,f=k);while(i!==null)h.push(i),k=f,a.charCodeAt(f)===46?(l=".",f++):(l=null,j===0&&s('"."')),l!==null?(m=P(),m!==null?i=[l,m]:(i=null,f=k)):(i=null,f=k);h!==null?b=[e,h]:(b=null,f=d)}else b=null,f=d;return b!==null&&(g=c,b=function(a,b){var c=[a];for(var d=0,e=b.length;d<e;d++)c.push(b[d][1]);return c.join(".")}(e,h)),b===null&&(f=c),j--,j===0&&b===null&&s("property"),b}function Y(){var b,c,d,e,h,i,k,l;return c=f,d=f,e=X(),e!==null?(h=D(),h!==null?(a.charCodeAt(f)===61?(i="=",f++):(i=null,j===0&&s('"="')),i!==null?(k=D(),k!==null?(l=U(),l===null&&(l=V(),l===null&&(l=P())),l!==null?b=[e,h,i,k,l]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a,b){return{type:"AttributeStatement",key:a,value:b}}(e,l)),b===null&&(f=c),b}function Z(){var a,b,c,d,e,h,i,j,k;b=f,c=f,d=Y();if(d!==null){e=[],i=f,j=D(),j!==null?(k=Y(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);while(h!==null)e.push(h),i=f,j=D(),j!==null?(k=Y(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);e!==null?a=[d,e]:(a=null,f=c)}else a=null,f=c;return a!==null&&(g=b,a=function(a,b){var c=[a];for(var d=0,e=b.length;d<e;d++)c.push(b[d][1]);return c}(d,e)),a===null&&(f=b),a}function $(){var b,c,d,e,h,i,k,l,m,n;return c=f,d=f,e=P(),e!==null?(h=D(),h!==null?(a.charCodeAt(f)===58?(i=":",f++):(i=null,j===0&&s('":"')),i!==null?(k=D(),k!==null?(l=U(),l===null&&(l=V(),l===null&&(l=bc())),l!==null?(m=D(),m!==null?(a.charCodeAt(f)===59?(n=";",f++):(n=null,j===0&&s('";"')),n!==null?b=[e,h,i,k,l,m,n]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a,b){return{type:"Argument",key:a,value:b}}(e,l)),b===null&&(f=c),b}function _(){var a,b,c,d,e,h,i,j,k;b=f,c=f,d=$();if(d!==null){e=[],i=f,j=D(),j!==null?(k=$(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);while(h!==null)e.push(h),i=f,j=D(),j!==null?(k=$(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);e!==null?a=[d,e]:(a=null,f=c)}else a=null,f=c;return a!==null&&(g=b,a=function(a,b){var c=[a];for(var d=0,e=b.length;d<e;d++)c.push(b[d][1]);return c}(d,e)),a===null&&(f=b),a}function ba(){var a;return a=bf(),a===null&&(a=_()),a}function bb(){var b,c,d,e,h,i,k,l,m,n,o,p,q;c=f,d=f,e=X(),e!==null?(h=D(),h!==null?(i=Z(),i=i!==null?i:"",i!==null?(k=D(),k!==null?(a.charCodeAt(f)===59?(l=";",f++):(l=null,j===0&&s('";"')),l!==null?b=[e,h,i,k,l]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a,b){return{type:"ViewStatement",constructorName:a,value:a,attributes:b||[],children:[]}}(e,i)),b===null&&(f=c);if(b===null){c=f,d=f,e=V(),e===null&&(e=X());if(e!==null){h=D();if(h!==null){i=Z(),i=i!==null?i:"";if(i!==null){k=D();if(k!==null){a.charCodeAt(f)===123?(l="{",f++):(l=null,j===0&&s('"{"'));if(l!==null){m=[],o=f,p=D(),p!==null?(q=ba(),q!==null?n=[p,q]:(n=null,f=o)):(n=null,f=o);while(n!==null)m.push(n),o=f,p=D(),p!==null?(q=ba(),q!==null?n=[p,q]:(n=null,f=o)):(n=null,f=o);m!==null?(n=D(),n!==null?(a.charCodeAt(f)===125?(o="}",f++):(o=null,j===0&&s('"}"')),o!==null?b=[e,h,i,k,l,m,n,o]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d;b!==null&&(g=c,b=function(a,b,c){return c=c[0],{type:"ViewStatement",constructorName:a,value:a,attributes:b||[],children:c&&c[1]||[]}}(e,i,m)),b===null&&(f=c)}return b}function bc(){var a,b,c,d,e,h;return b=f,c=f,d=X(),d!==null?(e=D(),e!==null?(h=Z(),h=h!==null?h:"",h!==null?a=[d,e,h]:(a=null,f=c)):(a=null,f=c)):(a=null,f=c),a!==null&&(g=b,a=function(a,b){return{type:"ViewStatement",constructorName:a,value:a,attributes:b||[],children:[]}}(d,h)),a===null&&(f=b),a}function bd(){var a,b,c,d,e,h;return b=f,c=f,d=S(),d!==null?(e=D(),e!==null?(h=bb(),h!==null?a=[d,e,h]:(a=null,f=c)):(a=null,f=c)):(a=null,f=c),a!==null&&(g=b,a=function(a){a.type="ViewDeclaration";var b=a.attributes;for(var c=0,d=b.length;c<d;c++)b[c].type="AttributeDeclaration";return a}(h)),a===null&&(f=b),a}function be(){var a;return a=bd(),a===null&&(a=bb(),a===null&&(a=W(),a===null&&(a=U()))),a}function bf(){var a,b,c,d,e,h,i,j,k;b=f,c=f,d=be();if(d!==null){e=[],i=f,j=D(),j!==null?(k=be(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);while(h!==null)e.push(h),i=f,j=D(),j!==null?(k=be(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);e!==null?a=[d,e]:(a=null,f=c)}else a=null,f=c;return a!==null&&(g=b,a=function(a,b){var c=[a];for(var d=0,e=b.length;d<e;d++)c.push(b[d][1]);return c}(d,e)),a===null&&(f=b),a}function bg(){var a,b;return b=f,a=bf(),a=a!==null?a:"",a!==null&&(g=b,a=function(a){return{nodes:a}}(a)),a===null&&(f=b),a}function bh(a){a.sort();var b=null,c=[];for(var d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}var b={start:t},d=arguments.length>1?arguments[1]:{},e;if(d.startRule!==undefined){e=d.startRule;if(b[e]===undefined)throw Error("Can't start parsing from rule "+c(e)+".")}else e="start";var f=0,g=0,h=0,i={line:1,column:1,seenCR:!1},j=0,k=0,l=[],bi=b[e]();if(bi===null||f!==a.length){g=Math.max(f,k);var bj=g<a.length?a.charAt(g):null,bk=o();throw new this.SyntaxError(bh(l),bj,g,bk.line,bk.column)}return bi}},a.SyntaxError=function(a,b,d,e,f){function g(a,b){var d,e;switch(a.length){case 0:d="end of input";break;case 1:d=a[0];break;default:d=a.slice(0,a.length-1).join(", ")+" or "+a[a.length-1]}return e=b?c(b):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=a,this.found=b,this.message=g(a,b),this.offset=d,this.line=e,this.column=f},b(a.SyntaxError,Error),a}(),Hector.Builders=function(){function k(a){var b="",c=-1;while(a>h)a-=g,c++;return c>-1&&(b+=k(c)),a=Math.floor(a),b+=f[a],b}function l(a){return(a+"").replace(/[\\"']/gm,"\\$&").replace(/\u0000/gm,"\\0")}function m(a,b){var c,d,e=[],f=[];for(c in b)b.hasOwnProperty(c)&&(f.push(b[c]),e.push(c),a=a.replace(RegExp("\\$"+c,"gmi"),b[c]));return a="var p=[],print=function(){p.push.apply(p,arguments);};p.push('"+l(a).replace(/[\r\t\n]/g,"\\n").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');return p.join('');",e.push(a),Hector.log(a),d=Function.apply(null,e),Hector.log(d+""),d.apply(null,f)}function n(b,c){var d=a.templates[b];if(!d)throw Error("Builder.renderTemplate "+b+" not found");return m(d,c)}function o(a,b,c){var d=n(a,{key:b.key,value:e(b.value),contextName:c});return d}var a,b,c,d,e,f,g,h,i,j;return(Hector.symbols=[]).add=function(a){this.indexOf(a)===-1&&this.push(a)},Hector.comma=",\n   ",a={},a.templates={},b=Hector.options,c=b.viewMethods,d=Hector.walkTree,e=Hector.parseTreeNode,f="abcdefghijklmnopqrstuvwxyz".split(""),g=f.length,h=g-1,i={count:-1,stack:[],save:function(){this.stack.push(i.count),i.count=-1},restore:function(){i.count=this.stack.pop()},create:function(){i.count++;var a=k(i.count);return Hector.symbols.indexOf(a)!==-1?this.create():a}},j={},a.Literal=function(a){return a.value},a.StringLiteral=function(a){return a.value},a.Variable=function(a){return a.value="scope."+a.value,a.evaluation=a.value,n("Variable",a)},a.VariableStatement=function(a,b){return a.value="scope."+a.value,a.evaluation=n("Echo",{contextName:b,value:a.value}),n("Variable",a)},a.Argument=function(b,c){var d="",e=b.value;switch(e.type){case"Variable":e=a.Variable(e);break;case"ViewStatement":e=e.value;break;default:e=e+""}return d+=c+".context."+b.key+" = "+e+";\n",d},a.AttributeStatement=function(a,b){return o("AttributeStatement",a,b)},a.AttributeDeclaration=function(a,b){return o("AttributeDeclaration",a,b)},a.ViewStatement=function(a,b){var c,e="",f="",g=a.constructorName,h=i.create();return e+='"'+g+'";\n',a.children.length&&(f+=d(a.children,h).join("")),f+=d(a.attributes,h).join("\n"),c=!1,g.type==="Variable"&&(c=g.isConditional,g=g.value),e+=n("ViewStatement",{contextName:b,varName:h,constructorName:g,isConditional:c,inner:f}),e},a.ViewDeclaration=function(b,c){var e,f,g,h;return i.save(),e=b.constructorName,f=d(b.attributes,c),g="",g+="function (scope) {\n",g+='"'+e+'";\n',g+=d(b.children,c).join(""),g+="}",f.push(a.AttributeDeclaration({key:"template",value:g,contextName:e})),h=n("ViewDeclaration",{constructorName:e,attributes:f}),i.restore(),h},a}(window,document),Hector.Builders.templates.Echo="Hector.echo.call($contextName, $value)",Hector.Builders.templates.Variable='<% if (isConditional) { %> (typeof $value !== "undefined") ? $evaluation : undefined; <% } else { %> $evaluation; <% } %>',Hector.Builders.templates.AttributeStatement='Hector.Backbone.setAttribute("$key", $value, $contextName);',Hector.Builders.templates.AttributeDeclaration="$key: $value",Hector.Builders.templates.ViewStatement='<% if (isConditional) { %> if (typeof $constructorName !== "undefined") { var $varName = new $constructorName(); $inner $contextName.appendChild($varName); } <% } else { %> var $varName = (typeof $constructorName !== "undefined") ? new $constructorName : new Hector.options.elementConstructor("$constructorName"); $inner $contextName.appendChild($varName); <% } %>',Hector.Builders.templates.ViewDeclaration="<%=Hector.options.namespace%>.$constructorName = Hector.Backbone.View.extend({ <% print(attributes.join(Hector.comma)); %> });";