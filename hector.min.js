/**
 * Hector.js
 * (c) 2012 Jay Phelps
 * MIT licensed
 * https://github.com/jayphelps/hector
 */var Hector=function(e,t){"use strict";function s(e){return i.call(e)=="[object String]"}function o(e){return i.call(e)=="[object Function]"}function u(e){return e===Object(e)}function a(e,t){throw e.name="Hector"+e.name,e.message='"'+e.message+'" while '+t,e}function f(t,n){r.log&&e.console&&(n=n||"Log",console.log("Hector"+n+":",t))}function l(e){return e.replace(/([a-z][A-Z])/g,function(e){return e[0]+"-"+e[1].toLowerCase()})}function c(e){var n=t.createElement("x-element");return n.innerHTML=e,n.firstChild}function h(e){var t="    ";return t+=e.replace(/\n/g,function(t,n){return n!==e.length-1&&(t+="    "),t}),t}function p(){this.children=[]}function d(e){if(!r.buffer)return t.createTextNode(e);this.value=e,this.isRendered=!1}function v(e){if(!r.buffer)return t.createElement(e);this.tagName=e,this.children=[],this.layer=undefined,this.isRendered=!1}function m(e,t,n){if(!n)throw Error("Hector.render() a context is required.");var i=r.buffer;n instanceof p&&(r.buffer=!0);var s=[],o=[];for(var u in t)t.hasOwnProperty(u)&&(s.push(u),o.push(t[u]));s.push("var HectorOptions = Hector.options;\n"+e);var a=Function.apply(null,s);a.apply(n,o),r.buffer=i}var n={},r=n.options={log:!0,viewMethods:{appendChild:"appendChild"},debug:!0,buffer:!0,baseConstructor:v},i=Object.prototype.toString;return n.log=f,n.parseTreeNode=function(e,t){var r=n.Builders[e.type];if(!r)throw Error("No builder for type: "+e.type);var i=r(e,t)+"";return i},n.walkTree=function(e,t){var r="";for(var i=0,s=e.length;i<s;i++)r+=n.parseTreeNode(e[i],t);return r},n.StringBuilder=p,p.prototype.appendChild=function(e){this.children.push(e)},p.prototype.renderBuffer=function(){var e="",t=this.children;for(var n=0,r=t.length;n<r;n++)e+=t[n].renderBuffer();return e},p.prototype.render=function(){throw Error("StringBuilder#render has no implementation, did you mean StringBuilder#renderBuffer?")},n.TextNodeContainer=d,d.prototype.appendChild=function(e){throw Error("TextNodeContainer has no appendChild")},d.prototype.renderBuffer=function(){return this.value},d.prototype.render=function(){var e=this.renderBuffer();this.layer=t.createTextNode(e),this.isRendered=!0},n.ElementContainer=v,v.prototype.attributeMap={className:"class"},v.prototype.appendChild=function(e){this.children.push(e)},v.prototype.renderAttributes=function(){var e=[],t=this.attributeMap,n,r;for(var i in this)if(this.hasOwnProperty(i))switch(i){case"tagName":case"children":case"layer":case"isRendered":continue;default:r=t[i]||l(i),n=r+'="'+this[i]+'"',e.push(n)}return e.length&&e.unshift(""),e.join(" ")},v.prototype.renderBuffer=function(){var e="",t=this.tagName,n=this.children,r=this.renderAttributes();e+="<"+t+r+">";for(var i=0,s=n.length;i<s;i++)e+=n[i].renderBuffer();return e+="</"+t+">",e},v.prototype.render=function(){var e=this.renderBuffer();this.layer=c(e),this.isRendered=!0},n.echo=function(e){if(o(e)){var t=new e;this.appendChild(t);return}var n=new d(e);return this.appendNode?this.appendNode(n):this.appendChild(n),e},n.render=function(e,t,n){if(r.debug){var i=e.slice(0,e.indexOf(";\n")).replace(/\"/g,"");try{m(e,t,n)}catch(s){throw a(s,"rendering template "+i)}}else m(e,t,n)},n.compile=function(e){if(!e)return"";var t=n.Parser.parse(e);f(t,"ParseTree");var r=n.walkTree(t.nodes,"this");return f(r,"TemplateOutput"),r},n}(window,document);Hector.Parser=function(){function t(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function n(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e;return e={parse:function(e){function h(e,t,n){var r=e,i=n-e.length;for(var s=0;s<i;s++)r=t+r;return r}function p(e){var t=e.charCodeAt(0),n,r;return t>255?(n="u",r=4):(n="x",r=2),"\\"+n+h(t.toString(16).toUpperCase(),"0",r)}function d(){function t(){var t;for(;u<o;u++)t=e.charAt(u),t==="\n"?(a.seenCR||a.line++,a.column=1,a.seenCR=!1):t==="\r"||t==="\u2028"||t==="\u2029"?(a.line++,a.column=1,a.seenCR=!0):(a.column++,a.seenCR=!1)}return u!==o&&(u>o&&(u=0,a={line:1,column:1,seenCR:!1}),t()),a}function v(){return o}function m(){return d().line}function g(){return d().column}function y(e){if(s<l)return;s>l&&(l=s,c=[]),c.push(e)}function b(){var e,t,n,r,i,u;return t=s,n=s,r=ot(),r!==null?(i=w(),i!==null?(u=ot(),u!==null?e=[r,i,u]:(e=null,s=n)):(e=null,s=n)):(e=null,s=n),e!==null&&(o=t,e=function(e){return e}(i)),e===null&&(s=t),e}function w(){var e,t;return t=s,e=E(),e=e!==null?e:"",e!==null&&(o=t,e=function(e){return{nodes:e}}(e)),e===null&&(s=t),e}function E(){var e,t,n,r,i,u,a,f,l;t=s,n=s,r=S();if(r!==null){i=[],a=s,f=ot(),f!==null?(l=S(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);while(u!==null)i.push(u),a=s,f=ot(),f!==null?(l=S(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);i!==null?e=[r,i]:(e=null,s=n)}else e=null,s=n;return e!==null&&(o=t,e=function(e,t){var n=[e];for(var r=0,i=t.length;r<i;r++)n.push(t[r][1]);return n}(r,i)),e===null&&(s=t),e}function S(){var e,t;return e=H(),e===null&&(e=C(),e===null&&(e=k(),e===null&&(e=N(),e===null&&(t=s,e=q(),e!==null&&(o=t,e=function(e){return{type:"String",attributes:[],value:e}}(e)),e===null&&(s=t))))),e}function x(){var e,t,n,r,i,u,a,f,l;t=s,n=s,r=T();if(r!==null){i=[],a=s,f=ot(),f!==null?(l=T(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);while(u!==null)i.push(u),a=s,f=ot(),f!==null?(l=T(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);i!==null?e=[r,i]:(e=null,s=n)}else e=null,s=n;return e!==null&&(o=t,e=function(e,t){var n=[e];for(var r=0,i=t.length;r<i;r++)n.push(t[r][1]);return n}(r,i)),e===null&&(s=t),e}function T(){var e,t;return e=H(),e===null&&(e=k(),e===null&&(e=N(),e===null&&(t=s,e=q(),e!==null&&(o=t,e=function(e){return{type:"String",attributes:[],value:e}}(e)),e===null&&(s=t)))),e}function N(){var t,n,r,i,u,a,l,c,h,p,d,v,m,g,b,w,E,S;n=s,r=s,e.charCodeAt(s)===60?(i="<",s++):(i=null,f===0&&y('"<"'));if(i!==null){u=ot();if(u!==null){a=j();if(a!==null){l=ot();if(l!==null){c=j(),c=c!==null?c:"";if(c!==null){h=ot();if(h!==null){p=_(),p=p!==null?p:"";if(p!==null){d=ot();if(d!==null){e.charCodeAt(s)===62?(v=">",s++):(v=null,f===0&&y('">"'));if(v!==null){m=[],b=s,E=s,f++,e.substr(s,2)==="</"?(w="</",s+=2):(w=null,f===0&&y('"</"')),f--,w===null?w="":(w=null,s=E),w!==null?(E=N(),E===null&&(E=ut()),E!==null?g=[w,E]:(g=null,s=b)):(g=null,s=b);while(g!==null)m.push(g),b=s,E=s,f++,e.substr(s,2)==="</"?(w="</",s+=2):(w=null,f===0&&y('"</"')),f--,w===null?w="":(w=null,s=E),w!==null?(E=N(),E===null&&(E=ut()),E!==null?g=[w,E]:(g=null,s=b)):(g=null,s=b);m!==null?(e.substr(s,2)==="</"?(g="</",s+=2):(g=null,f===0&&y('"</"')),g!==null?(b=ot(),b!==null?(w=j(),w!==null?(E=ot(),E!==null?(e.charCodeAt(s)===62?(S=">",s++):(S=null,f===0&&y('">"')),S!==null?t=[i,u,a,l,c,h,p,d,v,m,g,b,w,E,S]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r;return t!==null&&(o=n,t=function(e,t,n,r,i){var s=[],o="",u;for(var a=0,f=r.length;a<f;a++)u=r[a][1],u.type?(o&&s.push({type:"String",value:o}),s.push(u),o=""):o+=u;return o&&s.push({type:"String",value:o}),{type:"Html",identifier:e,argument:t,attributes:n||[],children:s}}(a,c,p,m,w)),t===null&&(s=n),t}function C(){var t,n,r,i,u,a;return n=s,r=s,e.substr(s,3)==="def"?(i="def",s+=3):(i=null,f===0&&y('"def"')),i!==null?(u=ot(),u!==null?(a=k(),a!==null?t=[i,u,a]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e.type="ViewDeclaration",e}(a)),t===null&&(s=n),t}function k(){var t,n,r,i,u,a,l,c,h,p,d,v,m;n=s,r=s,i=B(),i===null&&(i=j()),i!==null?(u=ot(),u!==null?(a=_(),a=a!==null?a:"",a!==null?(l=ot(),l!==null?(e.charCodeAt(s)===59?(c=";",s++):(c=null,f===0&&y('";"')),c!==null?t=[i,u,a,l,c]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e,t){return{type:"View",constructorName:e,value:e,attributes:t||[],children:[]}}(i,a)),t===null&&(s=n);if(t===null){n=s,r=s,i=B(),i===null&&(i=j());if(i!==null){u=ot();if(u!==null){a=_(),a=a!==null?a:"";if(a!==null){l=ot();if(l!==null){e.charCodeAt(s)===123?(c="{",s++):(c=null,f===0&&y('"{"'));if(c!==null){h=[],d=s,v=ot(),v!==null?(m=A(),m!==null?p=[v,m]:(p=null,s=d)):(p=null,s=d);while(p!==null)h.push(p),d=s,v=ot(),v!==null?(m=A(),m!==null?p=[v,m]:(p=null,s=d)):(p=null,s=d);h!==null?(p=ot(),p!==null?(e.charCodeAt(s)===125?(d="}",s++):(d=null,f===0&&y('"}"')),d!==null?t=[i,u,a,l,c,h,p,d]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r;t!==null&&(o=n,t=function(e,t,n){return n=n[0],{type:"View",constructorName:e,value:e,attributes:t||[],children:n&&n[1]||[]}}(i,a,h)),t===null&&(s=n)}return t}function L(){var e,t,n,r,i,u;return t=s,n=s,r=j(),r!==null?(i=ot(),i!==null?(u=_(),u=u!==null?u:"",u!==null?e=[r,i,u]:(e=null,s=n)):(e=null,s=n)):(e=null,s=n),e!==null&&(o=t,e=function(e,t){return{type:"View",constructorName:e,value:e,attributes:t||[],children:[]}}(r,u)),e===null&&(s=t),e}function A(){var e;return e=x(),e===null&&(e=O()),e}function O(){var e,t,n,r,i,u,a,f,l;t=s,n=s,r=M();if(r!==null){i=[],a=s,f=ot(),f!==null?(l=M(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);while(u!==null)i.push(u),a=s,f=ot(),f!==null?(l=M(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);i!==null?e=[r,i]:(e=null,s=n)}else e=null,s=n;return e!==null&&(o=t,e=function(e,t){var n=[e];for(var r=0,i=t.length;r<i;r++)n.push(t[r][1]);return n}(r,i)),e===null&&(s=t),e}function M(){var t,n,r,i,u,a,l,c,h,p;return n=s,r=s,i=j(),i!==null?(u=ot(),u!==null?(e.charCodeAt(s)===58?(a=":",s++):(a=null,f===0&&y('":"')),a!==null?(l=ot(),l!==null?(c=q(),c===null&&(c=B(),c===null&&(c=L())),c!==null?(h=ot(),h!==null?(e.charCodeAt(s)===59?(p=";",s++):(p=null,f===0&&y('";"')),p!==null?t=[i,u,a,l,c,h,p]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e,t){return{type:"Argument",key:e,value:t}}(i,c)),t===null&&(s=n),t}function _(){var e,t,n,r,i,u,a,f,l;t=s,n=s,r=D();if(r!==null){i=[],a=s,f=ot(),f!==null?(l=D(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);while(u!==null)i.push(u),a=s,f=ot(),f!==null?(l=D(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);i!==null?e=[r,i]:(e=null,s=n)}else e=null,s=n;return e!==null&&(o=t,e=function(e,t){var n=[e];for(var r=0,i=t.length;r<i;r++)n.push(t[r][1]);return n}(r,i)),e===null&&(s=t),e}function D(){var t,n,r,i,u,a,l,c;return n=s,r=s,i=P(),i!==null?(u=ot(),u!==null?(e.charCodeAt(s)===61?(a="=",s++):(a=null,f===0&&y('"="')),a!==null?(l=ot(),l!==null?(c=q(),c===null&&(c=B(),c===null&&(c=j())),c!==null?t=[i,u,a,l,c]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e,t){return{type:"Attribute",key:e,value:t}}(i,c)),t===null&&(s=n),t}function P(){var t,n,r,i,u,a,l,c,h;f++,n=s,r=s,i=j();if(i!==null){u=[],l=s,e.charCodeAt(s)===46?(c=".",s++):(c=null,f===0&&y('"."')),c!==null?(h=j(),h!==null?a=[c,h]:(a=null,s=l)):(a=null,s=l);while(a!==null)u.push(a),l=s,e.charCodeAt(s)===46?(c=".",s++):(c=null,f===0&&y('"."')),c!==null?(h=j(),h!==null?a=[c,h]:(a=null,s=l)):(a=null,s=l);u!==null?t=[i,u]:(t=null,s=r)}else t=null,s=r;return t!==null&&(o=n,t=function(e,t){var n=[e];for(var r=0,i=t.length;r<i;r++)n.push(t[r][1]);return n.join(".")}(i,u)),t===null&&(s=n),f--,f===0&&t===null&&y("property"),t}function H(){var t,n,r,i,u,a;return f++,n=s,r=s,i=B(),i!==null?(u=ot(),u!==null?(e.charCodeAt(s)===59?(a=";",s++):(a=null,f===0&&y('";"')),a!==null?t=[i,u,a]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e.type="VariableStatement",e}(i)),t===null&&(s=n),f--,f===0&&t===null&&y("variableStatement"),t}function B(){var t,n,r,i,u,a,l,c,h;f++,n=s,r=s,e.charCodeAt(s)===36?(i="$",s++):(i=null,f===0&&y('"$"'));if(i!==null){u=F();if(u!==null){a=[],l=I();while(l!==null)a.push(l),l=I();a!==null?(e.charCodeAt(s)===63?(l="?",s++):(l=null,f===0&&y('"?"')),l=l!==null?l:"",l!==null?(c=ot(),c!==null?(h=_(),h=h!==null?h:"",h!==null?t=[i,u,a,l,c,h]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)}else t=null,s=r}else t=null,s=r;return t!==null&&(o=n,t=function(e,t,n,r){return{type:"Variable",value:e+t.join(""),isConditional:!!n,attributes:r||[]}}(u,a,l,h)),t===null&&(s=n),f--,f===0&&t===null&&y("variable"),t}function j(){var e,t,n,r,i,u;f++,t=s,n=s,r=F();if(r!==null){i=[],u=I();while(u!==null)i.push(u),u=I();i!==null?e=[r,i]:(e=null,s=n)}else e=null,s=n;return e!==null&&(o=t,e=function(e,t){return e+t.join("")}(r,i)),e===null&&(s=t),f--,f===0&&e===null&&y("identifier"),e}function F(){var t;return/^[a-zA-Z_]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[a-zA-Z_]")),t}function I(){var t;return t=F(),t===null&&(/^[0-9]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[0-9]"))),t}function q(){var t,n,r,i,u,a;return f++,n=s,r=s,e.charCodeAt(s)===34?(i='"',s++):(i=null,f===0&&y('"\\""')),i!==null?(u=R(),u=u!==null?u:"",u!==null?(e.charCodeAt(s)===34?(a='"',s++):(a=null,f===0&&y('"\\""')),a!==null?t=[i,u,a]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t===null&&(r=s,e.charCodeAt(s)===39?(i="'",s++):(i=null,f===0&&y('"\'"')),i!==null?(u=U(),u=u!==null?u:"",u!==null?(e.charCodeAt(s)===39?(a="'",s++):(a=null,f===0&&y('"\'"')),a!==null?t=[i,u,a]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)),t!==null&&(o=n,t=function(e){return'"'+e[1]+'"'}(t)),t===null&&(s=n),f--,f===0&&t===null&&y("string"),t}function R(){var e,t,n;t=s,n=z();if(n!==null){e=[];while(n!==null)e.push(n),n=z()}else e=null;return e!==null&&(o=t,e=function(e){return e.join("")}(e)),e===null&&(s=t),e}function U(){var e,t,n;t=s,n=W();if(n!==null){e=[];while(n!==null)e.push(n),n=W()}else e=null;return e!==null&&(o=t,e=function(e){return e.join("")}(e)),e===null&&(s=t),e}function z(){var t,n,r,i,u;return n=s,r=s,u=s,f++,e.charCodeAt(s)===34?(i='"',s++):(i=null,f===0&&y('"\\""')),i===null&&(e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i===null&&(i=Z())),f--,i===null?i="":(i=null,s=u),i!==null?(u=ut(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t===null&&(n=s,r=s,e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i!==null?(u=V(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t===null&&(t=X())),t}function W(){var t,n,r,i,u;return n=s,r=s,u=s,f++,e.charCodeAt(s)===39?(i="'",s++):(i=null,f===0&&y('"\'"')),i===null&&(e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i===null&&(i=Z())),f--,i===null?i="":(i=null,s=u),i!==null?(u=ut(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t===null&&(n=s,r=s,e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i!==null?(u=V(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t===null&&(t=X())),t}function X(){var t,n,r,i,u;return n=s,r=s,e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i!==null?(u=Z(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t}function V(){var e;return e=$(),e===null&&(e=J()),e}function $(){var t,n;return n=s,/^['"\\bfnrtv]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("['\"\\\\bfnrtv]")),t!==null&&(o=n,t=function(e){return e.replace("b","\b").replace("f","\f").replace("n","\n").replace("r","\r").replace("t","	").replace("v","")}(t)),t===null&&(s=n),t}function J(){var e,t,n,r,i;return t=s,n=s,i=s,f++,r=K(),f--,r===null?r="":(r=null,s=i),r===null&&(r=Z()),r!==null?(i=ut(),i!==null?e=[r,i]:(e=null,s=n)):(e=null,s=n),e!==null&&(o=t,e=function(e){return e}(i)),e===null&&(s=t),e}function K(){var t;return t=$(),t===null&&(t=G(),t===null&&(e.charCodeAt(s)===120?(t="x",s++):(t=null,f===0&&y('"x"')),t===null&&(e.charCodeAt(s)===117?(t="u",s++):(t=null,f===0&&y('"u"'))))),t}function Q(){var e,t,n;t=s,n=G();if(n!==null){e=[];while(n!==null)e.push(n),n=G()}else e=null;return e!==null&&(o=t,e=function(e){return e.join("")}(e)),e===null&&(s=t),e}function G(){var t;return/^[0-9]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[0-9]")),t}function Y(){var t;return f++,/^[ \t\x0B\f]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[ \\t\\x0B\\f]")),f--,f===0&&t===null&&y("whitespace"),t}function Z(){var t;return f++,/^[\n\r]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[\\n\\r]")),f--,f===0&&t===null&&y("end of line"),t}function et(){var e;return f++,e=tt(),e===null&&(e=rt()),f--,f===0&&e===null&&y("comment"),e}function tt(){var t,n,r,i,o,u,a,l;n=s,e.substr(s,2)==="/*"?(r="/*",s+=2):(r=null,f===0&&y('"/*"'));if(r!==null){i=[],u=s,l=s,f++,e.substr(s,2)==="*/"?(a="*/",s+=2):(a=null,f===0&&y('"*/"')),f--,a===null?a="":(a=null,s=l),a!==null?(l=ut(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);while(o!==null)i.push(o),u=s,l=s,f++,e.substr(s,2)==="*/"?(a="*/",s+=2):(a=null,f===0&&y('"*/"')),f--,a===null?a="":(a=null,s=l),a!==null?(l=ut(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);i!==null?(e.substr(s,2)==="*/"?(o="*/",s+=2):(o=null,f===0&&y('"*/"')),o!==null?t=[r,i,o]:(t=null,s=n)):(t=null,s=n)}else t=null,s=n;return t}function nt(){var t,n,r,i,o,u,a,l;n=s,e.substr(s,2)==="/*"?(r="/*",s+=2):(r=null,f===0&&y('"/*"'));if(r!==null){i=[],u=s,l=s,f++,e.substr(s,2)==="*/"?(a="*/",s+=2):(a=null,f===0&&y('"*/"')),a===null&&(a=Z()),f--,a===null?a="":(a=null,s=l),a!==null?(l=ut(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);while(o!==null)i.push(o),u=s,l=s,f++,e.substr(s,2)==="*/"?(a="*/",s+=2):(a=null,f===0&&y('"*/"')),a===null&&(a=Z()),f--,a===null?a="":(a=null,s=l),a!==null?(l=ut(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);i!==null?(e.substr(s,2)==="*/"?(o="*/",s+=2):(o=null,f===0&&y('"*/"')),o!==null?t=[r,i,o]:(t=null,s=n)):(t=null,s=n)}else t=null,s=n;return t}function rt(){var t,n,r,i,o,u,a,l;n=s,e.substr(s,2)==="//"?(r="//",s+=2):(r=null,f===0&&y('"//"'));if(r!==null){i=[],u=s,l=s,f++,a=Z(),f--,a===null?a="":(a=null,s=l),a!==null?(l=ut(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);while(o!==null)i.push(o),u=s,l=s,f++,a=Z(),f--,a===null?a="":(a=null,s=l),a!==null?(l=ut(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);i!==null?t=[r,i]:(t=null,s=n)}else t=null,s=n;return t}function it(){var t,n;return n=s,f++,e.length>s?(t=e.charAt(s),s++):(t=null,f===0&&y("any character")),f--,t===null?t="":(t=null,s=n),t}function st(){var e,t;e=[],t=Y(),t===null&&(t=nt(),t===null&&(t=rt()));while(t!==null)e.push(t),t=Y(),t===null&&(t=nt(),t===null&&(t=rt()));return e}function ot(){var e,t;e=[],t=Y(),t===null&&(t=Z(),t===null&&(t=et()));while(t!==null)e.push(t),t=Y(),t===null&&(t=Z(),t===null&&(t=et()));return e}function ut(){var t;return e.length>s?(t=e.charAt(s),s++):(t=null,f===0&&y("any character")),t}function at(e){e.sort();var t=null,n=[];for(var r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}var t={start:b},r=arguments.length>1?arguments[1]:{},i;if(r.startRule!==undefined){i=r.startRule;if(t[i]===undefined)throw Error("Can't start parsing from rule "+n(i)+".")}else i="start";var s=0,o=0,u=0,a={line:1,column:1,seenCR:!1},f=0,l=0,c=[],ft=t[i]();if(ft===null||s!==e.length){o=Math.max(s,l);var lt=o<e.length?e.charAt(o):null,ct=d();throw new this.SyntaxError(at(c),lt,o,ct.line,ct.column)}return ft}},e.SyntaxError=function(e,t,r,i,s){function o(e,t){var r,i;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return i=t?n(t):"end of input","Expected "+r+" but "+i+" found."}this.name="SyntaxError",this.expected=e,this.found=t,this.message=o(e,t),this.offset=r,this.line=i,this.column=s},t(e.SyntaxError,Error),e}(),Hector.Builders=function(){function l(e){var t="",n=-1;while(e>u)e-=o,n++;return n>-1&&(t+=l(n)),e=Math.floor(e),t+=s[e]+"_",t}function c(){var e;return i.count++,e=l(i.count),i.excludes.indexOf(e)!==-1?c():e}function h(e,t){var n,i,s,o,u="";for(i=0,s=e.length;i<s;i++){n=e[i];if(n.type!=="Attribute")throw Error("Invalid attribute type: "+n.type);o=n.value,o&&o.type&&(o=r(o)),u+=t+"."+n.key+" = "+o+";\n"}return u}function p(e,t){var n,r,i=[],s=[];for(n in t)t.hasOwnProperty(n)&&(s.push(t[n]),i.push(n),e=e.replace(RegExp("\\$"+n,"gmi"),t[n]));return e='var p=[],print=function(){p.push.apply(p,arguments);};p.push("'+e.replace(/[\r\t\n]/g,"\\n").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,'",$1,"').split("	").join('");').split("%>").join('p.push("').split("\r").join("'").replace(/\$/gm,"")+'");return p.join("");',i.push(e),Hector.log(e),r=Function.apply(null,i),Hector.log(r+""),r.apply(null,s)}function d(e,t){var n=f.templates[e];if(!n)throw Error("Builder.renderTemplate "+e+" not found");return p(n,t)}var e,t,n,r,i,s,o,u,a,f={};return f.templates={},e=Hector.options,t=e.viewMethods,n=Hector.walkTree,r=Hector.parseTreeNode,i={count:-1,excludes:[],reset:function(){i.count=-1,i.excludes.length=0},exclude:function(){this.excludes.push.apply(this.excludes,arguments)}},s="abcdefghijklmnopqrstuvwxyz".split(""),o=s.length,u=o-1,a={},f.Literal=function(e){return e.value},f.String=function(){throw Error("String is not implemented yet")},f.Attribute=function(){throw Error("Attribute is not implemented yet")},f.Variable=function(e){return e.evaluation=e.value,d("Variable",e)},f.VariableStatement=function(e,t){return e.evaluation=d("Echo",{contextName:t,value:e.value}),d("Variable",e)},f.Argument=function(e,t){var n="",r=e.value;switch(r.type){case"Variable":r=f.Variable(r)+"";break;case"View":r=r.value;break;default:r=r+""}return n+=t+".context."+e.key+" = "+r+";\n",n},f.View=function(e,s){var o,u,a,f,l,h,p,v="",m="",g=e.constructorName;i.exclude(g),o=c(),v+="'"+g+"';\n",e.children.length&&(m+=n(e.children,o)),u=e.attributes;for(f=0,l=u.length;f<l;f++)a=u[f],h=a.value,h&&h.type&&(h=r(h)),h=h.replace(/"/gm,"'"),m+=o+"."+a.key+" = "+h+";\n";return p=!1,g.type==="Variable"&&(p=g.isConditional,g=g.value),v+=d("View",{contextName:s,appendChild:t.appendChild,varName:o,constructorName:g,isConditional:p,inner:m}),v},f.ViewDeclaration=function(e,t){var r,s;return i.reset(),r="",r+='"'+e.constructorName+'";\n',r+=h(e.attributes,t),r+=n(e.children,t),r=r.replace(/\n/g,"\\n").replace(/\"/g,'\\"'),s="",s+=e.constructorName+'.template = "'+r+'";\n',s},f}(window,document),Hector.Builders.templates.Echo="Hector.echo.call($contextName, $value)",Hector.Builders.templates.Variable="<% if (isConditional) { %>\n(typeof $value !== 'undefined')\n    ? $evaluation\n    : undefined;\n<% } else { %>\n$evaluation;\n<% } %>",Hector.Builders.templates.View="<% if (isConditional) { %>\nif (typeof $constructorName !== 'undefined') {\n    var $varName = new $constructorName();\n    $inner\n    $contextName.$appendChild($varName);\n}\n<% } else { %>\nvar $varName = (typeof $constructorName !== 'undefined')\n    ? new $constructorName\n    : new HectorOptions.baseConstructor('$constructorName');\n$inner\n$contextName.$appendChild($varName);\n<% } %>",Hector.Builders.templates.ViewDeclaration="";