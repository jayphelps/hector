/**
 * Hector.js
 * (c) 2012 Jay Phelps
 * MIT licensed
 * https://github.com/jayphelps/hector
 */var Hector=function(a,b){function f(a){return e.call(a)=="[object String]"}function g(a){return e.call(a)=="[object Function]"}function h(a){return a===Object(a)}function i(a,b){throw a.name="Hector"+a.name,a.message='"'+a.message+'" while '+b,a}function j(b,c){d.log&&a.console&&(c=c||"Log",console.log("Hector"+c+":",b))}function k(a){return a.replace(/([a-z][A-Z])/g,function(a){return a[0]+"-"+a[1].toLowerCase()})}function l(a){var c=b.createElement("x-element");return c.innerHTML=a,c.firstChild}function m(a){var b="    ";return b+=a.replace(/\n/g,function(b,c){return c!==a.length-1&&(b+="    "),b}),b}function n(){this.children=[]}function o(a){if(!d.buffer)return b.createTextNode(a);this.value=a,this.isRendered=!1}function p(a){if(!d.buffer)return b.createElement(a);this.tagName=a,this.children=[],this.layer=undefined,this.isRendered=!1}function q(a,b,c){if(!c)throw Error("Hector.render() a context is required.");var e=d.buffer;c instanceof n&&(d.buffer=!0);var f=[],g=[];for(var h in b)b.hasOwnProperty(h)&&(f.push(h),g.push(b[h]));f.push("var HectorOptions = Hector.options;\n"+a);var i=Function.apply(null,f);i.apply(c,g),d.buffer=e}"use strict";var c={},d=c.options={log:!0,viewMethods:{appendChild:"appendChild"},debug:!0,buffer:!0,baseConstructor:p},e=Object.prototype.toString;return c.log=j,c.parseTreeNode=function(a,b){var d=c.Builders[a.type];if(!d)throw Error("No builder for type: "+a.type);var e=d(a,b)+"";return e},c.walkTree=function(a,b){var d="";for(var e=0,f=a.length;e<f;e++)d+=c.parseTreeNode(a[e],b);return d},c.StringBuilder=n,n.prototype.appendChild=function(a){this.children.push(a)},n.prototype.renderBuffer=function(){var a="",b=this.children;for(var c=0,d=b.length;c<d;c++)a+=b[c].renderBuffer();return a},n.prototype.render=function(){throw Error("StringBuilder#render has no implementation, did you mean StringBuilder#renderBuffer?")},c.TextNodeContainer=o,o.prototype.appendChild=function(a){throw Error("TextNodeContainer has no appendChild")},o.prototype.renderBuffer=function(){return this.value},o.prototype.render=function(){var a=this.renderBuffer();this.layer=b.createTextNode(a),this.isRendered=!0},c.ElementContainer=p,p.prototype.attributeMap={className:"class"},p.prototype.appendChild=function(a){this.children.push(a)},p.prototype.renderAttributes=function(){var a=[],b=this.attributeMap,c,d;for(var e in this)if(this.hasOwnProperty(e))switch(e){case"tagName":case"children":case"layer":case"isRendered":continue;default:d=b[e]||k(e),c=d+'="'+this[e]+'"',a.push(c)}return a.length&&a.unshift(""),a.join(" ")},p.prototype.renderBuffer=function(){var a="",b=this.tagName,c=this.children,d=this.renderAttributes();a+="<"+b+d+">";for(var e=0,f=c.length;e<f;e++)a+=c[e].renderBuffer();return a+="</"+b+">",a},p.prototype.render=function(){var a=this.renderBuffer();this.layer=l(a),this.isRendered=!0},c.echo=function(a){if(g(a)){var b=new a;this.appendChild(b);return}var c=new o(a);return this.appendNode?this.appendNode(c):this.appendChild(c),a},c.render=function(a,b,c){if(d.debug){var e=a.slice(0,a.indexOf(";\n")).replace(/\"/g,"");try{q(a,b,c)}catch(f){throw i(f,"rendering template "+e)}}else q(a,b,c)},c.compile=function(a){if(!a)return"";var b=c.Parser.parse(a);j(b,"ParseTree");var d=c.walkTree(b.nodes,"this");return j(d,"TemplateOutput"),d},c}(window,document);Hector.Parser=function(){function b(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function c(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var a;return a={parse:function(a){function m(a,b,c){var d=a,e=c-a.length;for(var f=0;f<e;f++)d=b+d;return d}function n(a){var b=a.charCodeAt(0),c,d;return b>255?(c="u",d=4):(c="x",d=2),"\\"+c+m(b.toString(16).toUpperCase(),"0",d)}function o(){function b(){var b;for(;h<g;h++)b=a.charAt(h),b==="\n"?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):b==="\r"||b==="\u2028"||b==="\u2029"?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1)}return h!==g&&(h>g&&(h=0,i={line:1,column:1,seenCR:!1}),b()),i}function p(){return g}function q(){return o().line}function r(){return o().column}function s(a){if(f<k)return;f>k&&(k=f,l=[]),l.push(a)}function t(){var a,b,c,d,e,h;return b=f,c=f,d=bg(),d!==null?(e=u(),e!==null?(h=bg(),h!==null?a=[d,e,h]:(a=null,f=c)):(a=null,f=c)):(a=null,f=c),a!==null&&(g=b,a=function(a){return a}(e)),a===null&&(f=b),a}function u(){var a,b;return b=f,a=v(),a=a!==null?a:"",a!==null&&(g=b,a=function(a){return{nodes:a}}(a)),a===null&&(f=b),a}function v(){var a,b,c,d,e,h,i,j,k;b=f,c=f,d=w();if(d!==null){e=[],i=f,j=bg(),j!==null?(k=w(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);while(h!==null)e.push(h),i=f,j=bg(),j!==null?(k=w(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);e!==null?a=[d,e]:(a=null,f=c)}else a=null,f=c;return a!==null&&(g=b,a=function(a,b){var c=[a];for(var d=0,e=b.length;d<e;d++)c.push(b[d][1]);return c}(d,e)),a===null&&(f=b),a}function w(){var a,b;return a=J(),a===null&&(a=A(),a===null&&(a=B(),a===null&&(a=z(),a===null&&(b=f,a=O(),a!==null&&(g=b,a=function(a){return{type:"String",attributes:[],value:a}}(a)),a===null&&(f=b))))),a}function x(){var a,b,c,d,e,h,i,j,k;b=f,c=f,d=y();if(d!==null){e=[],i=f,j=bg(),j!==null?(k=y(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);while(h!==null)e.push(h),i=f,j=bg(),j!==null?(k=y(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);e!==null?a=[d,e]:(a=null,f=c)}else a=null,f=c;return a!==null&&(g=b,a=function(a,b){var c=[a];for(var d=0,e=b.length;d<e;d++)c.push(b[d][1]);return c}(d,e)),a===null&&(f=b),a}function y(){var a,b;return a=J(),a===null&&(a=B(),a===null&&(a=z(),a===null&&(b=f,a=O(),a!==null&&(g=b,a=function(a){return{type:"String",attributes:[],value:a}}(a)),a===null&&(f=b)))),a}function z(){var b,c,d,e,h,i,k,l,m,n,o,p,q,r,t,u,v,w;c=f,d=f,a.charCodeAt(f)===60?(e="<",f++):(e=null,j===0&&s('"<"'));if(e!==null){h=bg();if(h!==null){i=L();if(i!==null){k=bg();if(k!==null){l=L(),l=l!==null?l:"";if(l!==null){m=bg();if(m!==null){n=G(),n=n!==null?n:"";if(n!==null){o=bg();if(o!==null){a.charCodeAt(f)===62?(p=">",f++):(p=null,j===0&&s('">"'));if(p!==null){q=[],t=f,v=f,j++,a.substr(f,2)==="</"?(u="</",f+=2):(u=null,j===0&&s('"</"')),j--,u===null?u="":(u=null,f=v),u!==null?(v=z(),v===null&&(v=bh()),v!==null?r=[u,v]:(r=null,f=t)):(r=null,f=t);while(r!==null)q.push(r),t=f,v=f,j++,a.substr(f,2)==="</"?(u="</",f+=2):(u=null,j===0&&s('"</"')),j--,u===null?u="":(u=null,f=v),u!==null?(v=z(),v===null&&(v=bh()),v!==null?r=[u,v]:(r=null,f=t)):(r=null,f=t);q!==null?(a.substr(f,2)==="</"?(r="</",f+=2):(r=null,j===0&&s('"</"')),r!==null?(t=bg(),t!==null?(u=L(),u!==null?(v=bg(),v!==null?(a.charCodeAt(f)===62?(w=">",f++):(w=null,j===0&&s('">"')),w!==null?b=[e,h,i,k,l,m,n,o,p,q,r,t,u,v,w]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d;return b!==null&&(g=c,b=function(a,b,c,d,e){var f=[],g="",h;for(var i=0,j=d.length;i<j;i++)h=d[i][1],h.type?(g&&f.push({type:"String",value:g}),f.push(h),g=""):g+=h;return g&&f.push({type:"String",value:g}),{type:"Html",identifier:a,argument:b,attributes:c||[],children:f}}(i,l,n,q,u)),b===null&&(f=c),b}function A(){var b,c,d,e,h,i;return c=f,d=f,a.substr(f,3)==="def"?(e="def",f+=3):(e=null,j===0&&s('"def"')),e!==null?(h=bg(),h!==null?(i=B(),i!==null?b=[e,h,i]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a.type="ViewDeclaration",a}(i)),b===null&&(f=c),b}function B(){var b,c,d,e,h,i,k,l,m,n,o,p,q;c=f,d=f,e=K(),e===null&&(e=L()),e!==null?(h=bg(),h!==null?(i=G(),i=i!==null?i:"",i!==null?(k=bg(),k!==null?(a.charCodeAt(f)===59?(l=";",f++):(l=null,j===0&&s('";"')),l!==null?b=[e,h,i,k,l]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a,b){return{type:"View",constructorName:a,value:a,attributes:b||[],children:[]}}(e,i)),b===null&&(f=c);if(b===null){c=f,d=f,e=K(),e===null&&(e=L());if(e!==null){h=bg();if(h!==null){i=G(),i=i!==null?i:"";if(i!==null){k=bg();if(k!==null){a.charCodeAt(f)===123?(l="{",f++):(l=null,j===0&&s('"{"'));if(l!==null){m=[],o=f,p=bg(),p!==null?(q=D(),q!==null?n=[p,q]:(n=null,f=o)):(n=null,f=o);while(n!==null)m.push(n),o=f,p=bg(),p!==null?(q=D(),q!==null?n=[p,q]:(n=null,f=o)):(n=null,f=o);m!==null?(n=bg(),n!==null?(a.charCodeAt(f)===125?(o="}",f++):(o=null,j===0&&s('"}"')),o!==null?b=[e,h,i,k,l,m,n,o]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d}else b=null,f=d;b!==null&&(g=c,b=function(a,b,c){return c=c[0],{type:"View",constructorName:a,value:a,attributes:b||[],children:c&&c[1]||[]}}(e,i,m)),b===null&&(f=c)}return b}function C(){var a,b,c,d,e,h;return b=f,c=f,d=L(),d!==null?(e=bg(),e!==null?(h=G(),h=h!==null?h:"",h!==null?a=[d,e,h]:(a=null,f=c)):(a=null,f=c)):(a=null,f=c),a!==null&&(g=b,a=function(a,b){return{type:"View",constructorName:a,value:a,attributes:b||[],children:[]}}(d,h)),a===null&&(f=b),a}function D(){var a;return a=x(),a===null&&(a=E()),a}function E(){var a,b,c,d,e,h,i,j,k;b=f,c=f,d=F();if(d!==null){e=[],i=f,j=bg(),j!==null?(k=F(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);while(h!==null)e.push(h),i=f,j=bg(),j!==null?(k=F(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);e!==null?a=[d,e]:(a=null,f=c)}else a=null,f=c;return a!==null&&(g=b,a=function(a,b){var c=[a];for(var d=0,e=b.length;d<e;d++)c.push(b[d][1]);return c}(d,e)),a===null&&(f=b),a}function F(){var b,c,d,e,h,i,k,l,m,n;return c=f,d=f,e=L(),e!==null?(h=bg(),h!==null?(a.charCodeAt(f)===58?(i=":",f++):(i=null,j===0&&s('":"')),i!==null?(k=bg(),k!==null?(l=O(),l===null&&(l=K(),l===null&&(l=C())),l!==null?(m=bg(),m!==null?(a.charCodeAt(f)===59?(n=";",f++):(n=null,j===0&&s('";"')),n!==null?b=[e,h,i,k,l,m,n]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a,b){return{type:"Argument",key:a,value:b}}(e,l)),b===null&&(f=c),b}function G(){var a,b,c,d,e,h,i,j,k;b=f,c=f,d=H();if(d!==null){e=[],i=f,j=bg(),j!==null?(k=H(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);while(h!==null)e.push(h),i=f,j=bg(),j!==null?(k=H(),k!==null?h=[j,k]:(h=null,f=i)):(h=null,f=i);e!==null?a=[d,e]:(a=null,f=c)}else a=null,f=c;return a!==null&&(g=b,a=function(a,b){var c=[a];for(var d=0,e=b.length;d<e;d++)c.push(b[d][1]);return c}(d,e)),a===null&&(f=b),a}function H(){var b,c,d,e,h,i,k,l;return c=f,d=f,e=I(),e!==null?(h=bg(),h!==null?(a.charCodeAt(f)===61?(i="=",f++):(i=null,j===0&&s('"="')),i!==null?(k=bg(),k!==null?(l=O(),l===null&&(l=K(),l===null&&(l=L())),l!==null?b=[e,h,i,k,l]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a,b){return{type:"Attribute",key:a,value:b}}(e,l)),b===null&&(f=c),b}function I(){var b,c,d,e,h,i,k,l,m;j++,c=f,d=f,e=L();if(e!==null){h=[],k=f,a.charCodeAt(f)===46?(l=".",f++):(l=null,j===0&&s('"."')),l!==null?(m=L(),m!==null?i=[l,m]:(i=null,f=k)):(i=null,f=k);while(i!==null)h.push(i),k=f,a.charCodeAt(f)===46?(l=".",f++):(l=null,j===0&&s('"."')),l!==null?(m=L(),m!==null?i=[l,m]:(i=null,f=k)):(i=null,f=k);h!==null?b=[e,h]:(b=null,f=d)}else b=null,f=d;return b!==null&&(g=c,b=function(a,b){var c=[a];for(var d=0,e=b.length;d<e;d++)c.push(b[d][1]);return c.join(".")}(e,h)),b===null&&(f=c),j--,j===0&&b===null&&s("property"),b}function J(){var b,c,d,e,h,i;return j++,c=f,d=f,e=K(),e!==null?(h=bg(),h!==null?(a.charCodeAt(f)===59?(i=";",f++):(i=null,j===0&&s('";"')),i!==null?b=[e,h,i]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a.type="VariableStatement",a}(e)),b===null&&(f=c),j--,j===0&&b===null&&s("variableStatement"),b}function K(){var b,c,d,e,h,i,k,l,m;j++,c=f,d=f,a.charCodeAt(f)===36?(e="$",f++):(e=null,j===0&&s('"$"'));if(e!==null){h=M();if(h!==null){i=[],k=N();while(k!==null)i.push(k),k=N();i!==null?(a.charCodeAt(f)===63?(k="?",f++):(k=null,j===0&&s('"?"')),k=k!==null?k:"",k!==null?(l=bg(),l!==null?(m=G(),m=m!==null?m:"",m!==null?b=[e,h,i,k,l,m]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)):(b=null,f=d)}else b=null,f=d}else b=null,f=d;return b!==null&&(g=c,b=function(a,b,c,d){return{type:"Variable",value:a+b.join(""),isConditional:!!c,attributes:d||[]}}(h,i,k,m)),b===null&&(f=c),j--,j===0&&b===null&&s("variable"),b}function L(){var a,b,c,d,e,h;j++,b=f,c=f,d=M();if(d!==null){e=[],h=N();while(h!==null)e.push(h),h=N();e!==null?a=[d,e]:(a=null,f=c)}else a=null,f=c;return a!==null&&(g=b,a=function(a,b){return a+b.join("")}(d,e)),a===null&&(f=b),j--,j===0&&a===null&&s("identifier"),a}function M(){var b;return/^[a-zA-Z_]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[a-zA-Z_]")),b}function N(){var b;return b=M(),b===null&&(/^[0-9]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[0-9]"))),b}function O(){var b,c,d,e,h,i;return j++,c=f,d=f,a.charCodeAt(f)===34?(e='"',f++):(e=null,j===0&&s('"\\""')),e!==null?(h=P(),h=h!==null?h:"",h!==null?(a.charCodeAt(f)===34?(i='"',f++):(i=null,j===0&&s('"\\""')),i!==null?b=[e,h,i]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d),b===null&&(d=f,a.charCodeAt(f)===39?(e="'",f++):(e=null,j===0&&s('"\'"')),e!==null?(h=Q(),h=h!==null?h:"",h!==null?(a.charCodeAt(f)===39?(i="'",f++):(i=null,j===0&&s('"\'"')),i!==null?b=[e,h,i]:(b=null,f=d)):(b=null,f=d)):(b=null,f=d)),b!==null&&(g=c,b=function(a){return'"'+a[1]+'"'}(b)),b===null&&(f=c),j--,j===0&&b===null&&s("string"),b}function P(){var a,b,c;b=f,c=R();if(c!==null){a=[];while(c!==null)a.push(c),c=R()}else a=null;return a!==null&&(g=b,a=function(a){return a.join("")}(a)),a===null&&(f=b),a}function Q(){var a,b,c;b=f,c=S();if(c!==null){a=[];while(c!==null)a.push(c),c=S()}else a=null;return a!==null&&(g=b,a=function(a){return a.join("")}(a)),a===null&&(f=b),a}function R(){var b,c,d,e,h;return c=f,d=f,h=f,j++,a.charCodeAt(f)===34?(e='"',f++):(e=null,j===0&&s('"\\""')),e===null&&(a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e===null&&(e=_())),j--,e===null?e="":(e=null,f=h),e!==null?(h=bh(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b===null&&(c=f,d=f,a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e!==null?(h=U(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b===null&&(b=T())),b}function S(){var b,c,d,e,h;return c=f,d=f,h=f,j++,a.charCodeAt(f)===39?(e="'",f++):(e=null,j===0&&s('"\'"')),e===null&&(a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e===null&&(e=_())),j--,e===null?e="":(e=null,f=h),e!==null?(h=bh(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b===null&&(c=f,d=f,a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e!==null?(h=U(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b===null&&(b=T())),b}function T(){var b,c,d,e,h;return c=f,d=f,a.charCodeAt(f)===92?(e="\\",f++):(e=null,j===0&&s('"\\\\"')),e!==null?(h=_(),h!==null?b=[e,h]:(b=null,f=d)):(b=null,f=d),b!==null&&(g=c,b=function(a){return a}(h)),b===null&&(f=c),b}function U(){var a;return a=V(),a===null&&(a=W()),a}function V(){var b,c;return c=f,/^['"\\bfnrtv]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("['\"\\\\bfnrtv]")),b!==null&&(g=c,b=function(a){return a.replace("b","\b").replace("f","\f").replace("n","\n").replace("r","\r").replace("t","\t").replace("v","")}(b)),b===null&&(f=c),b}function W(){var a,b,c,d,e;return b=f,c=f,e=f,j++,d=X(),j--,d===null?d="":(d=null,f=e),d===null&&(d=_()),d!==null?(e=bh(),e!==null?a=[d,e]:(a=null,f=c)):(a=null,f=c),a!==null&&(g=b,a=function(a){return a}(e)),a===null&&(f=b),a}function X(){var b;return b=V(),b===null&&(b=Z(),b===null&&(a.charCodeAt(f)===120?(b="x",f++):(b=null,j===0&&s('"x"')),b===null&&(a.charCodeAt(f)===117?(b="u",f++):(b=null,j===0&&s('"u"'))))),b}function Y(){var a,b,c;b=f,c=Z();if(c!==null){a=[];while(c!==null)a.push(c),c=Z()}else a=null;return a!==null&&(g=b,a=function(a){return a.join("")}(a)),a===null&&(f=b),a}function Z(){var b;return/^[0-9]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[0-9]")),b}function $(){var b;return j++,/^[ \t\x0B\f]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[ \\t\\x0B\\f]")),j--,j===0&&b===null&&s("whitespace"),b}function _(){var b;return j++,/^[\n\r]/.test(a.charAt(f))?(b=a.charAt(f),f++):(b=null,j===0&&s("[\\n\\r]")),j--,j===0&&b===null&&s("end of line"),b}function ba(){var a;return j++,a=bb(),a===null&&(a=bd()),j--,j===0&&a===null&&s("comment"),a}function bb(){var b,c,d,e,g,h,i,k;c=f,a.substr(f,2)==="/*"?(d="/*",f+=2):(d=null,j===0&&s('"/*"'));if(d!==null){e=[],h=f,k=f,j++,a.substr(f,2)==="*/"?(i="*/",f+=2):(i=null,j===0&&s('"*/"')),j--,i===null?i="":(i=null,f=k),i!==null?(k=bh(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);while(g!==null)e.push(g),h=f,k=f,j++,a.substr(f,2)==="*/"?(i="*/",f+=2):(i=null,j===0&&s('"*/"')),j--,i===null?i="":(i=null,f=k),i!==null?(k=bh(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);e!==null?(a.substr(f,2)==="*/"?(g="*/",f+=2):(g=null,j===0&&s('"*/"')),g!==null?b=[d,e,g]:(b=null,f=c)):(b=null,f=c)}else b=null,f=c;return b}function bc(){var b,c,d,e,g,h,i,k;c=f,a.substr(f,2)==="/*"?(d="/*",f+=2):(d=null,j===0&&s('"/*"'));if(d!==null){e=[],h=f,k=f,j++,a.substr(f,2)==="*/"?(i="*/",f+=2):(i=null,j===0&&s('"*/"')),i===null&&(i=_()),j--,i===null?i="":(i=null,f=k),i!==null?(k=bh(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);while(g!==null)e.push(g),h=f,k=f,j++,a.substr(f,2)==="*/"?(i="*/",f+=2):(i=null,j===0&&s('"*/"')),i===null&&(i=_()),j--,i===null?i="":(i=null,f=k),i!==null?(k=bh(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);e!==null?(a.substr(f,2)==="*/"?(g="*/",f+=2):(g=null,j===0&&s('"*/"')),g!==null?b=[d,e,g]:(b=null,f=c)):(b=null,f=c)}else b=null,f=c;return b}function bd(){var b,c,d,e,g,h,i,k;c=f,a.substr(f,2)==="//"?(d="//",f+=2):(d=null,j===0&&s('"//"'));if(d!==null){e=[],h=f,k=f,j++,i=_(),j--,i===null?i="":(i=null,f=k),i!==null?(k=bh(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);while(g!==null)e.push(g),h=f,k=f,j++,i=_(),j--,i===null?i="":(i=null,f=k),i!==null?(k=bh(),k!==null?g=[i,k]:(g=null,f=h)):(g=null,f=h);e!==null?b=[d,e]:(b=null,f=c)}else b=null,f=c;return b}function be(){var b,c;return c=f,j++,a.length>f?(b=a.charAt(f),f++):(b=null,j===0&&s("any character")),j--,b===null?b="":(b=null,f=c),b}function bf(){var a,b;a=[],b=$(),b===null&&(b=bc(),b===null&&(b=bd()));while(b!==null)a.push(b),b=$(),b===null&&(b=bc(),b===null&&(b=bd()));return a}function bg(){var a,b;a=[],b=$(),b===null&&(b=_(),b===null&&(b=ba()));while(b!==null)a.push(b),b=$(),b===null&&(b=_(),b===null&&(b=ba()));return a}function bh(){var b;return a.length>f?(b=a.charAt(f),f++):(b=null,j===0&&s("any character")),b}function bi(a){a.sort();var b=null,c=[];for(var d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}var b={start:t},d=arguments.length>1?arguments[1]:{},e;if(d.startRule!==undefined){e=d.startRule;if(b[e]===undefined)throw Error("Can't start parsing from rule "+c(e)+".")}else e="start";var f=0,g=0,h=0,i={line:1,column:1,seenCR:!1},j=0,k=0,l=[],bj=b[e]();if(bj===null||f!==a.length){g=Math.max(f,k);var bk=g<a.length?a.charAt(g):null,bl=o();throw new this.SyntaxError(bi(l),bk,g,bl.line,bl.column)}return bj}},a.SyntaxError=function(a,b,d,e,f){function g(a,b){var d,e;switch(a.length){case 0:d="end of input";break;case 1:d=a[0];break;default:d=a.slice(0,a.length-1).join(", ")+" or "+a[a.length-1]}return e=b?c(b):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=a,this.found=b,this.message=g(a,b),this.offset=d,this.line=e,this.column=f},b(a.SyntaxError,Error),a}(),Hector.Builders=function(){function k(a){var b="",c=-1;while(a>h)a-=g,c++;return c>-1&&(b+=k(c)),a=Math.floor(a),b+=f[a]+"_",b}function l(){var a;return e.count++,a=k(e.count),e.excludes.indexOf(a)!==-1?l():a}function m(a,b){var c,e,f,g,h="";for(e=0,f=a.length;e<f;e++){c=a[e];if(c.type!=="Attribute")throw Error("Invalid attribute type: "+c.type);g=c.value,g&&g.type&&(g=d(g)),h+=b+"."+c.key+" = "+g+";\n"}return h}function n(a,b){var c,d,e=[],f=[];for(c in b)b.hasOwnProperty(c)&&(f.push(b[c]),e.push(c),a=a.replace(RegExp("\\$"+c,"gmi"),b[c]));return a='var p=[],print=function(){p.push.apply(p,arguments);};p.push("'+a.replace(/[\r\t\n]/g,"\\n").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,'",$1,"').split("\t").join('");').split("%>").join('p.push("').split("\r").join("'").replace(/\$/gm,"")+'");return p.join("");',e.push(a),Hector.log(a),d=Function.apply(null,e),Hector.log(d+""),d.apply(null,f)}function o(a,b){var c=j.templates[a];if(!c)throw Error("Builder.renderTemplate "+a+" not found");return n(c,b)}var a,b,c,d,e,f,g,h,i,j={};return j.templates={},a=Hector.options,b=a.viewMethods,c=Hector.walkTree,d=Hector.parseTreeNode,e={count:-1,excludes:[],reset:function(){e.count=-1,e.excludes.length=0},exclude:function(){this.excludes.push.apply(this.excludes,arguments)}},f="abcdefghijklmnopqrstuvwxyz".split(""),g=f.length,h=g-1,i={},j.Literal=function(a){return a.value},j.String=function(){throw Error("String is not implemented yet")},j.Attribute=function(){throw Error("Attribute is not implemented yet")},j.Variable=function(a){return a.evaluation=a.value,o("Variable",a)},j.VariableStatement=function(a,b){return a.evaluation=o("Echo",{contextName:b,value:a.value}),o("Variable",a)},j.Argument=function(a,b){var c="",d=a.value;switch(d.type){case"Variable":d=j.Variable(d)+"";break;case"View":d=d.value;break;default:d=d+""}return c+=b+".context."+a.key+" = "+d+";\n",c},j.View=function(a,f){var g,h,i,j,k,m,n,p="",q="",r=a.constructorName;e.exclude(r),g=l(),p+="'"+r+"';\n",a.children.length&&(q+=c(a.children,g)),h=a.attributes;for(j=0,k=h.length;j<k;j++)i=h[j],m=i.value,m&&m.type&&(m=d(m)),m=m.replace(/"/gm,"'"),q+=g+"."+i.key+" = "+m+";\n";return n=!1,r.type==="Variable"&&(n=r.isConditional,r=r.value),p+=o("View",{contextName:f,appendChild:b.appendChild,varName:g,constructorName:r,isConditional:n,inner:q}),p},j.ViewDeclaration=function(a,b){var d,f;return e.reset(),d="",d+='"'+a.constructorName+'";\n',d+=m(a.attributes,b),d+=c(a.children,b),d=d.replace(/\n/g,"\\n").replace(/\"/g,'\\"'),f="",f+=a.constructorName+'.template = "'+d+'";\n',f},j}(window,document),Hector.Builders.templates.Echo="Hector.echo.call($contextName, $value)",Hector.Builders.templates.Variable="<% if (isConditional) { %>\n(typeof $value !== 'undefined')\n    ? $evaluation\n    : undefined;\n<% } else { %>\n$evaluation;\n<% } %>",Hector.Builders.templates.View="<% if (isConditional) { %>\nif (typeof $constructorName !== 'undefined') {\n    var $varName = new $constructorName();\n    $inner\n    $contextName.$appendChild($varName);\n}\n<% } else { %>\nvar $varName = (typeof $constructorName !== 'undefined')\n    ? new $constructorName\n    : new HectorOptions.baseConstructor('$constructorName');\n$inner\n$contextName.$appendChild($varName);\n<% } %>",Hector.Builders.templates.ViewDeclaration="";