/**
 * Hector.js
 * (c) 2012 Jay Phelps
 * MIT Licensed
 * https://github.com/jayphelps/hector
 * 
 * Simple JavaScript Inheritance
 * John Resig http://ejohn.org/
 * MIT Licensed
 */var Hector=function(e,t){"use strict";function s(e){return i.call(e)=="[object String]"}function o(e){return i.call(e)=="[object Function]"}function u(e){return e===Object(e)}function a(e,t){throw e.name="Hector"+e.name,e.message='"'+e.message+'" while '+t,e}function f(t,n){r.log&&e.console&&(n=n||"Log",console.log("Hector"+n+":",t))}function l(e){return e.replace(/([a-z][A-Z])/g,function(e){return e[0]+"-"+e[1].toLowerCase()})}function c(e){var n=t.createElement("x-element");return n.innerHTML=e,n.firstChild}function h(e){var t="    ";return t+=e.replace(/\n/g,function(t,n){return n!==e.length-1&&(t+="    "),t}),t}function p(){this.children=[]}function d(e){if(!r.buffer)return t.createTextNode(e);this.value=e,this.isRendered=!1}function v(e){if(!r.buffer)return t.createElement(e);this.tagName=e,this.children=[],this.layer=undefined,this.isRendered=!1}function m(e,t,n){if(!n)throw Error("Hector.render() a context is required.");var i=r.buffer;n instanceof p&&(r.buffer=!0);var s=[],o=[];for(var u in t)t.hasOwnProperty(u)&&(s.push(u),o.push(t[u]));s.push("var HectorOptions = Hector.options;\n"+e);var a=Function.apply(null,s);a.apply(n,o),r.buffer=i}var n={},r=n.options={log:!0,debug:!0,buffer:!0,elementConstructor:v,namespace:"window",target:"javascript/hector"},i=Object.prototype.toString;return n.log=f,n.parseTreeNode=function(e,t){if(!e||!e.type)return e;var r=n.Builders[e.type];if(!r)throw Error("No builder for type: "+e.type);var i=r(e,t)+"";return i},n.walkTree=function(e,t){var r=[];for(var i=0,s=e.length;i<s;i++)r.push(n.parseTreeNode(e[i],t));return r},n.StringBuilder=p,p.prototype.appendChild=function(e){this.children.push(e)},p.prototype.renderBuffer=function(){var e="",t=this.children;for(var n=0,r=t.length;n<r;n++)e+=t[n].renderBuffer();return e},p.prototype.render=function(){throw Error("StringBuilder#render has no implementation, did you mean StringBuilder#renderBuffer?")},n.TextNodeContainer=d,d.prototype.appendChild=function(e){throw Error("TextNodeContainer has no appendChild")},d.prototype.renderBuffer=function(){return this.value},d.prototype.render=function(){var e=this.renderBuffer();this.layer=t.createTextNode(e),this.isRendered=!0},n.ElementContainer=v,v.prototype.attributeMap={className:"class"},v.prototype.appendChild=function(e){this.children.push(e)},v.prototype.renderAttributes=function(){var e=[],t=this.attributeMap,n,r;for(var i in this)if(this.hasOwnProperty(i))switch(i){case"tagName":case"children":case"layer":case"isRendered":continue;default:r=t[i]||l(i),n=r+'="'+this[i]+'"',e.push(n)}return e.length&&e.unshift(""),e.join(" ")},v.prototype.renderBuffer=function(){var e="",t=this.tagName,n=this.children,r=this.renderAttributes();e+="<"+t+r+">";for(var i=0,s=n.length;i<s;i++)e+=n[i].renderBuffer();return e+="</"+t+">",e},v.prototype.render=function(){var e=this.renderBuffer();this.layer=c(e),this.isRendered=!0},n.echo=function(e){if(o(e)){var t=new e;this.appendChild(t);return}var n=new d(e);return this.appendNode?this.appendNode(n):this.appendChild(n),e},n.render=function(e,t,n){if(r.debug){var i=e.slice(0,e.indexOf(";\n")).replace(/\"/g,"");try{m(e,t,n)}catch(s){throw a(s,"rendering template "+i)}}else m(e,t,n)},n.compile=function(e){if(!e)return"";var t=n.Parser.parse(e);f(t,"ParseTree");var r=n.walkTree(t.nodes,"this").join("");return f(r,"TemplateOutput"),r},n.eval=function(e){var r=n.compile(e),i=t.createElement("script");i.appendChild(t.createTextNode(r)),(t.body||t.head||t.documentElement).appendChild(i)},n}(window,document);Hector.Parser=function(){function t(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function n(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e;return e={parse:function(e){function h(e,t,n){var r=e,i=n-e.length;for(var s=0;s<i;s++)r=t+r;return r}function p(e){var t=e.charCodeAt(0),n,r;return t>255?(n="u",r=4):(n="x",r=2),"\\"+n+h(t.toString(16).toUpperCase(),"0",r)}function d(){function t(){var t;for(;u<o;u++)t=e.charAt(u),t==="\n"?(a.seenCR||a.line++,a.column=1,a.seenCR=!1):t==="\r"||t==="\u2028"||t==="\u2029"?(a.line++,a.column=1,a.seenCR=!0):(a.column++,a.seenCR=!1)}return u!==o&&(u>o&&(u=0,a={line:1,column:1,seenCR:!1}),t()),a}function v(){return o}function m(){return d().line}function g(){return d().column}function y(e){if(s<l)return;s>l&&(l=s,c=[]),c.push(e)}function b(){var e,t,n,r,i,u;return t=s,n=s,r=A(),r!==null?(i=ot(),i!==null?(u=A(),u!==null?e=[r,i,u]:(e=null,s=n)):(e=null,s=n)):(e=null,s=n),e!==null&&(o=t,e=function(e){return e}(i)),e===null&&(s=t),e}function w(){var t;return e.length>s?(t=e.charAt(s),s++):(t=null,f===0&&y("any character")),t}function E(){var t;return f++,/^[\n\r]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[\\n\\r]")),f--,f===0&&t===null&&y("end of line"),t}function S(){var t,n;return n=s,f++,e.length>s?(t=e.charAt(s),s++):(t=null,f===0&&y("any character")),f--,t===null?t="":(t=null,s=n),t}function x(){var t;return f++,/^[ \t\x0B\f]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[ \\t\\x0B\\f]")),f--,f===0&&t===null&&y("whitespace"),t}function T(){var e;return f++,e=N(),e===null&&(e=k()),f--,f===0&&e===null&&y("comment"),e}function N(){var t,n,r,i,o,u,a,l;n=s,e.substr(s,2)==="/*"?(r="/*",s+=2):(r=null,f===0&&y('"/*"'));if(r!==null){i=[],u=s,l=s,f++,e.substr(s,2)==="*/"?(a="*/",s+=2):(a=null,f===0&&y('"*/"')),f--,a===null?a="":(a=null,s=l),a!==null?(l=w(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);while(o!==null)i.push(o),u=s,l=s,f++,e.substr(s,2)==="*/"?(a="*/",s+=2):(a=null,f===0&&y('"*/"')),f--,a===null?a="":(a=null,s=l),a!==null?(l=w(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);i!==null?(e.substr(s,2)==="*/"?(o="*/",s+=2):(o=null,f===0&&y('"*/"')),o!==null?t=[r,i,o]:(t=null,s=n)):(t=null,s=n)}else t=null,s=n;return t}function C(){var t,n,r,i,o,u,a,l;n=s,e.substr(s,2)==="/*"?(r="/*",s+=2):(r=null,f===0&&y('"/*"'));if(r!==null){i=[],u=s,l=s,f++,e.substr(s,2)==="*/"?(a="*/",s+=2):(a=null,f===0&&y('"*/"')),a===null&&(a=E()),f--,a===null?a="":(a=null,s=l),a!==null?(l=w(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);while(o!==null)i.push(o),u=s,l=s,f++,e.substr(s,2)==="*/"?(a="*/",s+=2):(a=null,f===0&&y('"*/"')),a===null&&(a=E()),f--,a===null?a="":(a=null,s=l),a!==null?(l=w(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);i!==null?(e.substr(s,2)==="*/"?(o="*/",s+=2):(o=null,f===0&&y('"*/"')),o!==null?t=[r,i,o]:(t=null,s=n)):(t=null,s=n)}else t=null,s=n;return t}function k(){var t,n,r,i,o,u,a,l;n=s,e.substr(s,2)==="//"?(r="//",s+=2):(r=null,f===0&&y('"//"'));if(r!==null){i=[],u=s,l=s,f++,a=E(),f--,a===null?a="":(a=null,s=l),a!==null?(l=w(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);while(o!==null)i.push(o),u=s,l=s,f++,a=E(),f--,a===null?a="":(a=null,s=l),a!==null?(l=w(),l!==null?o=[a,l]:(o=null,s=u)):(o=null,s=u);i!==null?t=[r,i]:(t=null,s=n)}else t=null,s=n;return t}function L(){var e,t;e=[],t=x(),t===null&&(t=C(),t===null&&(t=k()));while(t!==null)e.push(t),t=x(),t===null&&(t=C(),t===null&&(t=k()));return e}function A(){var e,t;e=[],t=x(),t===null&&(t=E(),t===null&&(t=T()));while(t!==null)e.push(t),t=x(),t===null&&(t=E(),t===null&&(t=T()));return e}function O(){var e,t,n;t=s,n=_();if(n!==null){e=[];while(n!==null)e.push(n),n=_()}else e=null;return e!==null&&(o=t,e=function(e){return e.join("")}(e)),e===null&&(s=t),e}function M(){var e,t,n;t=s,n=D();if(n!==null){e=[];while(n!==null)e.push(n),n=D()}else e=null;return e!==null&&(o=t,e=function(e){return e.join("")}(e)),e===null&&(s=t),e}function _(){var t,n,r,i,u;return n=s,r=s,u=s,f++,e.charCodeAt(s)===34?(i='"',s++):(i=null,f===0&&y('"\\""')),i===null&&(e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i===null&&(i=E())),f--,i===null?i="":(i=null,s=u),i!==null?(u=w(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t===null&&(n=s,r=s,e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i!==null?(u=H(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t===null&&(t=P())),t}function D(){var t,n,r,i,u;return n=s,r=s,u=s,f++,e.charCodeAt(s)===39?(i="'",s++):(i=null,f===0&&y('"\'"')),i===null&&(e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i===null&&(i=E())),f--,i===null?i="":(i=null,s=u),i!==null?(u=w(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t===null&&(n=s,r=s,e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i!==null?(u=H(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t===null&&(t=P())),t}function P(){var t,n,r,i,u;return n=s,r=s,e.charCodeAt(s)===92?(i="\\",s++):(i=null,f===0&&y('"\\\\"')),i!==null?(u=E(),u!==null?t=[i,u]:(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e}(u)),t===null&&(s=n),t}function H(){var e;return e=B(),e===null&&(e=j()),e}function B(){var t,n;return n=s,/^['"\\bfnrtv]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("['\"\\\\bfnrtv]")),t!==null&&(o=n,t=function(e){return e.replace("b","\b").replace("f","\f").replace("n","\n").replace("r","\r").replace("t","	").replace("v","")}(t)),t===null&&(s=n),t}function j(){var e,t,n,r,i;return t=s,n=s,i=s,f++,r=F(),f--,r===null?r="":(r=null,s=i),r===null&&(r=E()),r!==null?(i=w(),i!==null?e=[r,i]:(e=null,s=n)):(e=null,s=n),e!==null&&(o=t,e=function(e){return e}(i)),e===null&&(s=t),e}function F(){var t;return t=B(),t===null&&(t=q(),t===null&&(e.charCodeAt(s)===120?(t="x",s++):(t=null,f===0&&y('"x"')),t===null&&(e.charCodeAt(s)===117?(t="u",s++):(t=null,f===0&&y('"u"'))))),t}function I(){var e,t,n;t=s,n=q();if(n!==null){e=[];while(n!==null)e.push(n),n=q()}else e=null;return e!==null&&(o=t,e=function(e){return e.join("")}(e)),e===null&&(s=t),e}function q(){var t;return/^[0-9]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[0-9]")),t}function R(){var e,t,n,r,i,u;f++,t=s,n=s,r=U();if(r!==null){i=[],u=z();while(u!==null)i.push(u),u=z();i!==null?e=[r,i]:(e=null,s=n)}else e=null,s=n;return e!==null&&(o=t,e=function(e,t){var n=e+t.join("");return Hector.symbols.add(n),n}(r,i)),e===null&&(s=t),f--,f===0&&e===null&&y("identifier"),e}function U(){var t;return/^[a-zA-Z_]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[a-zA-Z_]")),t}function z(){var t;return t=U(),t===null&&(/^[0-9]/.test(e.charAt(s))?(t=e.charAt(s),s++):(t=null,f===0&&y("[0-9]"))),t}function W(){var t,n,r,i,o;return n=s,e.substr(s,3)==="def"?(r="def",s+=3):(r=null,f===0&&y('"def"')),r!==null?(o=s,f++,i=z(),f--,i===null?i="":(i=null,s=o),i!==null?t=[r,i]:(t=null,s=n)):(t=null,s=n),t}function X(){var t,n,r,i,o;return n=s,e.charCodeAt(s)===63?(r="?",s++):(r=null,f===0&&y('"?"')),r!==null?(o=s,f++,i=z(),f--,i===null?i="":(i=null,s=o),i!==null?t=[r,i]:(t=null,s=n)):(t=null,s=n),t}function V(){var t,n,r,i,u,a;return f++,n=s,r=s,e.charCodeAt(s)===34?(i='"',s++):(i=null,f===0&&y('"\\""')),i!==null?(u=O(),u=u!==null?u:"",u!==null?(e.charCodeAt(s)===34?(a='"',s++):(a=null,f===0&&y('"\\""')),a!==null?t=[i,u,a]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t===null&&(r=s,e.charCodeAt(s)===39?(i="'",s++):(i=null,f===0&&y('"\'"')),i!==null?(u=M(),u=u!==null?u:"",u!==null?(e.charCodeAt(s)===39?(a="'",s++):(a=null,f===0&&y('"\'"')),a!==null?t=[i,u,a]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)),t!==null&&(o=n,t=function(e){return{type:"StringLiteral",attributes:[],value:'"'+e[1]+'"'}}(t)),t===null&&(s=n),f--,f===0&&t===null&&y("string"),t}function $(){var t,n,r,i,u,a,l,c,h;f++,n=s,r=s,e.charCodeAt(s)===36?(i="$",s++):(i=null,f===0&&y('"$"'));if(i!==null){u=U();if(u!==null){a=[],l=z();while(l!==null)a.push(l),l=z();a!==null?(l=X(),l=l!==null?l:"",l!==null?(c=A(),c!==null?(h=G(),h=h!==null?h:"",h!==null?t=[i,u,a,l,c,h]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)}else t=null,s=r}else t=null,s=r;return t!==null&&(o=n,t=function(e,t,n,r){var i=e+t.join("");return Hector.symbols.add(i),{type:"Variable",value:i,isConditional:!!n,attributes:r||[]}}(u,a,l,h)),t===null&&(s=n),f--,f===0&&t===null&&y("variable"),t}function J(){var t,n,r,i,u,a;return f++,n=s,r=s,i=$(),i!==null?(u=A(),u!==null?(e.charCodeAt(s)===59?(a=";",s++):(a=null,f===0&&y('";"')),a!==null?t=[i,u,a]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e){return e.type="VariableStatement",e}(i)),t===null&&(s=n),f--,f===0&&t===null&&y("variable"),t}function K(){var t,n,r,i,u,a,l,c,h;f++,n=s,r=s,i=R();if(i!==null){u=[],l=s,e.charCodeAt(s)===46?(c=".",s++):(c=null,f===0&&y('"."')),c!==null?(h=R(),h!==null?a=[c,h]:(a=null,s=l)):(a=null,s=l);while(a!==null)u.push(a),l=s,e.charCodeAt(s)===46?(c=".",s++):(c=null,f===0&&y('"."')),c!==null?(h=R(),h!==null?a=[c,h]:(a=null,s=l)):(a=null,s=l);u!==null?t=[i,u]:(t=null,s=r)}else t=null,s=r;return t!==null&&(o=n,t=function(e,t){var n=[e];for(var r=0,i=t.length;r<i;r++)n.push(t[r][1]);return n.join(".")}(i,u)),t===null&&(s=n),f--,f===0&&t===null&&y("property"),t}function Q(){var t,n,r,i,u,a,l,c;return n=s,r=s,i=K(),i!==null?(u=A(),u!==null?(e.charCodeAt(s)===61?(a="=",s++):(a=null,f===0&&y('"="')),a!==null?(l=A(),l!==null?(c=V(),c===null&&(c=$(),c===null&&(c=R())),c!==null?t=[i,u,a,l,c]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e,t){return{type:"AttributeStatement",key:e,value:t}}(i,c)),t===null&&(s=n),t}function G(){var e,t,n,r,i,u,a,f,l;t=s,n=s,r=Q();if(r!==null){i=[],a=s,f=A(),f!==null?(l=Q(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);while(u!==null)i.push(u),a=s,f=A(),f!==null?(l=Q(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);i!==null?e=[r,i]:(e=null,s=n)}else e=null,s=n;return e!==null&&(o=t,e=function(e,t){var n=[e];for(var r=0,i=t.length;r<i;r++)n.push(t[r][1]);return n}(r,i)),e===null&&(s=t),e}function Y(){var t,n,r,i,u,a,l,c,h,p;return n=s,r=s,i=R(),i!==null?(u=A(),u!==null?(e.charCodeAt(s)===58?(a=":",s++):(a=null,f===0&&y('":"')),a!==null?(l=A(),l!==null?(c=V(),c===null&&(c=$(),c===null&&(c=nt())),c!==null?(h=A(),h!==null?(e.charCodeAt(s)===59?(p=";",s++):(p=null,f===0&&y('";"')),p!==null?t=[i,u,a,l,c,h,p]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e,t){return{type:"Argument",key:e,value:t}}(i,c)),t===null&&(s=n),t}function Z(){var e,t,n,r,i,u,a,f,l;t=s,n=s,r=Y();if(r!==null){i=[],a=s,f=A(),f!==null?(l=Y(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);while(u!==null)i.push(u),a=s,f=A(),f!==null?(l=Y(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);i!==null?e=[r,i]:(e=null,s=n)}else e=null,s=n;return e!==null&&(o=t,e=function(e,t){var n=[e];for(var r=0,i=t.length;r<i;r++)n.push(t[r][1]);return n}(r,i)),e===null&&(s=t),e}function et(){var e;return e=st(),e===null&&(e=Z()),e}function tt(){var t,n,r,i,u,a,l,c,h,p,d,v,m;n=s,r=s,i=K(),i!==null?(u=A(),u!==null?(a=G(),a=a!==null?a:"",a!==null?(l=A(),l!==null?(e.charCodeAt(s)===59?(c=";",s++):(c=null,f===0&&y('";"')),c!==null?t=[i,u,a,l,c]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r)):(t=null,s=r),t!==null&&(o=n,t=function(e,t){return{type:"ViewStatement",constructorName:e,value:e,attributes:t||[],children:[]}}(i,a)),t===null&&(s=n);if(t===null){n=s,r=s,i=$(),i===null&&(i=K());if(i!==null){u=A();if(u!==null){a=G(),a=a!==null?a:"";if(a!==null){l=A();if(l!==null){e.charCodeAt(s)===123?(c="{",s++):(c=null,f===0&&y('"{"'));if(c!==null){h=[],d=s,v=A(),v!==null?(m=et(),m!==null?p=[v,m]:(p=null,s=d)):(p=null,s=d);while(p!==null)h.push(p),d=s,v=A(),v!==null?(m=et(),m!==null?p=[v,m]:(p=null,s=d)):(p=null,s=d);h!==null?(p=A(),p!==null?(e.charCodeAt(s)===125?(d="}",s++):(d=null,f===0&&y('"}"')),d!==null?t=[i,u,a,l,c,h,p,d]:(t=null,s=r)):(t=null,s=r)):(t=null,s=r)}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r}else t=null,s=r;t!==null&&(o=n,t=function(e,t,n){return n=n[0],{type:"ViewStatement",constructorName:e,value:e,attributes:t||[],children:n&&n[1]||[]}}(i,a,h)),t===null&&(s=n)}return t}function nt(){var e,t,n,r,i,u;return t=s,n=s,r=K(),r!==null?(i=A(),i!==null?(u=G(),u=u!==null?u:"",u!==null?e=[r,i,u]:(e=null,s=n)):(e=null,s=n)):(e=null,s=n),e!==null&&(o=t,e=function(e,t){return{type:"ViewStatement",constructorName:e,value:e,attributes:t||[],children:[]}}(r,u)),e===null&&(s=t),e}function rt(){var e,t,n,r,i,u;return t=s,n=s,r=W(),r!==null?(i=A(),i!==null?(u=tt(),u!==null?e=[r,i,u]:(e=null,s=n)):(e=null,s=n)):(e=null,s=n),e!==null&&(o=t,e=function(e){e.type="ViewDeclaration";var t=e.attributes;for(var n=0,r=t.length;n<r;n++)t[n].type="AttributeDeclaration";return e}(u)),e===null&&(s=t),e}function it(){var e;return e=rt(),e===null&&(e=tt(),e===null&&(e=J(),e===null&&(e=V()))),e}function st(){var e,t,n,r,i,u,a,f,l;t=s,n=s,r=it();if(r!==null){i=[],a=s,f=A(),f!==null?(l=it(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);while(u!==null)i.push(u),a=s,f=A(),f!==null?(l=it(),l!==null?u=[f,l]:(u=null,s=a)):(u=null,s=a);i!==null?e=[r,i]:(e=null,s=n)}else e=null,s=n;return e!==null&&(o=t,e=function(e,t){var n=[e];for(var r=0,i=t.length;r<i;r++)n.push(t[r][1]);return n}(r,i)),e===null&&(s=t),e}function ot(){var e,t;return t=s,e=st(),e=e!==null?e:"",e!==null&&(o=t,e=function(e){return{nodes:e}}(e)),e===null&&(s=t),e}function ut(e){e.sort();var t=null,n=[];for(var r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}var t={start:b},r=arguments.length>1?arguments[1]:{},i;if(r.startRule!==undefined){i=r.startRule;if(t[i]===undefined)throw Error("Can't start parsing from rule "+n(i)+".")}else i="start";var s=0,o=0,u=0,a={line:1,column:1,seenCR:!1},f=0,l=0,c=[],at=t[i]();if(at===null||s!==e.length){o=Math.max(s,l);var ft=o<e.length?e.charAt(o):null,lt=d();throw new this.SyntaxError(ut(c),ft,o,lt.line,lt.column)}return at}},e.SyntaxError=function(e,t,r,i,s){function o(e,t){var r,i;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return i=t?n(t):"end of input","Expected "+r+" but "+i+" found."}this.name="SyntaxError",this.expected=e,this.found=t,this.message=o(e,t),this.offset=r,this.line=i,this.column=s},t(e.SyntaxError,Error),e}(),Hector.Builders=function(){function c(e){var t="",n=-1;while(e>u)e-=o,n++;return n>-1&&(t+=c(n)),e=Math.floor(e),t+=s[e],t}function h(e,t){var n,r,i=[],s=[];for(n in t)t.hasOwnProperty(n)&&(s.push(t[n]),i.push(n),e=e.replace(RegExp("\\$"+n,"gmi"),t[n]));return e=e.replace(/(\\)?\\\"/g,function(e,t){return t?e:'\\\\\\"'}).replace(/(\\)?\"/g,function(e,t){return t?e:'\\"'}),e='var p=[],print=function(){p.push.apply(p,arguments);};p.push("'+e.replace(/[\r\t\n]/g,"\\n").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,'",$1,"').split("	").join('");').split("%>").join('p.push("').split("\r").join("\\'")+'");return p.join("");',i.push(e),Hector.log(e),r=Function.apply(null,i),Hector.log(r+""),r.apply(null,s)}function p(t,n){var r=e.templates[t];if(!r)throw Error("Builder.renderTemplate "+t+" not found");return h(r,n)}function d(e,t,n){var r=p(e,{key:t.key,value:i(t.value),contextName:n});return r}var e,t,n,r,i,s,o,u,a,f,l=Array.prototype.forEach;return Hector.forEach=function(e,t,n){var r,i,s;if(e==null)return;if(l&&e.forEach===l)e.forEach(t,n);else if(e.length===+e.length){for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===breaker)return}else for(s in e)if(e.hasOwnProperty(s)&&t.call(n,e[s],s,e)===breaker)return},(Hector.symbols=[]).add=function(e){this.indexOf(e)===-1&&this.push(e)},Hector.comma=",\n   ",e={},e.templates={},t=Hector.options,n=t.viewMethods,r=Hector.walkTree,i=Hector.parseTreeNode,s="abcdefghijklmnopqrstuvwxyz".split(""),o=s.length,u=o-1,a={count:-1,stack:[],save:function(){this.stack.push(a.count),a.count=-1},restore:function(){a.count=this.stack.pop()},create:function(){a.count++;var e=c(a.count);return Hector.symbols.indexOf(e)!==-1?this.create():e}},f={},e.Literal=function(e){return e.value},e.StringLiteral=function(e){return e.value},e.Variable=function(e){return e.evaluation=e.value,p("Variable",e)},e.VariableStatement=function(e,t){return e.evaluation=p("Echo",{contextName:t,value:e.value}),p("Variable",e)},e.Argument=function(t,n){var r="",i=t.value;switch(i.type){case"Variable":i=e.Variable(i);break;case"ViewStatement":i=i.value;break;default:i=i+""}return r+=n+".context."+t.key+" = "+i+";\n",r},e.AttributeStatement=function(e,t){return d("AttributeStatement",e,t)},e.AttributeDeclaration=function(e,t){return d("AttributeDeclaration",e,t)},e.ViewStatement=function(e,t){var n,i="",s="",o=e.constructorName,u=a.create();return i+='"'+o+'";\n',e.children.length&&(s+=r(e.children,u).join("")),s+=r(e.attributes,u).join("\n"),n=!1,o.type==="Variable"&&(n=o.isConditional,o=o.value),i+=p("ViewStatement",{contextName:t,varName:u,constructorName:o,isConditional:n,inner:s}),i},e.ViewDeclaration=function(t,n){var i,s,o,u;return a.save(),i=t.constructorName,s=r(t.attributes,n),o="",o+='"'+i+'";\n',o+=r(t.children,n).join(""),o='"'+o.replace(/\n/g,"\\\\n").replace(/\"/g,'\\"')+'"\n',s.push(e.AttributeDeclaration({key:"template",value:o,contextName:i})),u=p("ViewDeclaration",{constructorName:i,attributes:s}),a.restore(),u},e}(window,document),Hector.Builders.templates.Echo="Hector.echo.call($contextName, $value)",Hector.Builders.templates.Variable='<% if (isConditional) { %>\n(typeof $value !== "undefined")\n    ? $evaluation\n    : undefined;\n<% } else { %>\n$evaluation;\n<% } %>',Hector.Builders.templates.AttributeStatement='$contextName.$el.attr("$key", $value);',Hector.Builders.templates.AttributeDeclaration="$key: $value",Hector.Builders.templates.ViewStatement='<% if (isConditional) { %>\nif (typeof $constructorName !== "undefined") {\n    var $varName = new $constructorName();\n    $inner\n    $contextName.append($varName);\n}\n<% } else { %>\nvar $varName = (typeof $constructorName !== "undefined")\n    ? new $constructorName\n    : new HectorOptions.elementConstructor("$constructorName");\n$inner\n$contextName.$el.append($varName);\n<% } %>',Hector.Builders.templates.ViewDeclaration="<%=Hector.options.namespace%>.$constructorName = Backbone.View.extend({\n    <% print(attributes.join(Hector.comma)); %>\n});";